<?xml version="1.0" encoding="UTF-8"?>
<xml-fragment>
  <ser:coreEntry isProxy="true" isEnabled="true" xmlns:ser="http://www.bea.com/wli/sb/services">
    <ser:binding type="SOAP" isSoap12="true" xsi:type="con:SoapBindingType" xmlns:con="http://www.bea.com/wli/sb/services/bindings/config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:wsdl ref="general/NETSMSDatabaseConfig/wsdl/proxy/TransformaIdentificacaoContratoPropostaWSDL12V1"/><con:port><con:name>TransformaIdentificacaoContratoPropostaPort</con:name><con:namespace>http://www.netservicos.com.br/TransformaIdentificacaoContratoProposta12V1</con:namespace></con:port><con:selector type="SOAP body"><con:mapping operation="transformarIdentificacaoContratoProposta" value=""/></con:selector></ser:binding>
    <ser:monitoring isEnabled="false">
      <ser:aggregationInterval>10</ser:aggregationInterval>
    </ser:monitoring>
    <ser:reporting>true</ser:reporting>
    <ser:logging isEnabled="true">
      <ser:logLevel>debug</ser:logLevel>
    </ser:logging>
    <ser:sla-alerting isEnabled="true">
      <ser:alertLevel>normal</ser:alertLevel>
    </ser:sla-alerting>
    <ser:pipeline-alerting isEnabled="true">
      <ser:alertLevel>normal</ser:alertLevel>
    </ser:pipeline-alerting>
    <ser:ws-policy>
      <ser:binding-mode>wsdl-policy-attachments</ser:binding-mode>
    </ser:ws-policy>
  </ser:coreEntry>
  <ser:endpointConfig xmlns:ser="http://www.bea.com/wli/sb/services">
    <tran:provider-id xmlns:tran="http://www.bea.com/wli/sb/transports">http</tran:provider-id>
    <tran:inbound xmlns:tran="http://www.bea.com/wli/sb/transports">true</tran:inbound>
    <tran:URI xmlns:tran="http://www.bea.com/wli/sb/transports">
      <env:value xmlns:env="http://www.bea.com/wli/config/env">/general/TransformaIdentificacaoContratoProposta12V1</env:value>
    </tran:URI>
    <tran:inbound-properties xmlns:tran="http://www.bea.com/wli/sb/transports"/>
    <tran:all-headers xmlns:tran="http://www.bea.com/wli/sb/transports">false</tran:all-headers>
    <tran:provider-specific xmlns:tran="http://www.bea.com/wli/sb/transports"><http:inbound-properties xmlns:http="http://www.bea.com/wli/sb/transports/http"/></tran:provider-specific>
  </ser:endpointConfig>
  <ser:router errorHandler="_onErrorHandler-7138670890548299665--e1d69d3.1270b68eb4f.-7f7b" xmlns:ser="http://www.bea.com/wli/sb/services"><con:pipeline type="request" name="Transforma Identificacao Contrato Proposta_request" xmlns:con="http://www.bea.com/wli/sb/pipeline/config"><con:stage name="Estágio Trata NetHeader"><con:context><con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="netheader" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/></con:context><con:actions><con1:replace varName="header" contents-only="true" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7fbb</con2:id><con1:location><con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText></con1:location><con1:expr><con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config"><con2:resource ref="general/transformation/TransformarNetHeaderDefaults"/><con2:param name="tokenDefault"><con2:path>fn-bea:uuid()</con2:path></con2:param><con2:param name="netHeaderIN"><con2:path>$header//netheader:NetHeader</con2:path></con2:param><con2:param name="numeroProtocoloDefault"><con2:path>''</con2:path></con2:param><con2:param name="aplicacaoDefault"><con2:path>'OTHER'</con2:path></con2:param><con2:param name="funcionalidadeDefault"><con2:path>''</con2:path></con2:param><con2:param name="versaoServicoDefault"><con2:path>'1.2'</con2:path></con2:param><con2:param name="usernameDefault"><con2:path>'ANONYMUS'</con2:path></con2:param><con2:param name="numeroChamadaDefault"><con2:path>''</con2:path></con2:param></con2:xqueryTransform></con1:expr></con1:replace></con:actions></con:stage><con:stage name="Estágio de validação dos parâmetros de entrada" errorHandler="_onErrorHandler-7138670890548299665--e1d69d3.1270b68eb4f.-7fb1"><con:context><con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/identificacaoContratoProposta" prefix="idenconpro" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/><con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/identificacaoContrato" prefix="idencon" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/><con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/identificacaoProposta" prefix="idenpro" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/><con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/></con:context><con:actions><con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7fb4</con2:id><con1:case><con1:condition><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">($body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoProposta/node()
and $body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoProposta/idenpro:Proposta/idenpro:NumeroProposta ne "")
and ($body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoContrato/node()
	 and $body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoContrato/idencon:Contrato/idencon:NumeroContrato ne "")</con2:xqueryText></con1:condition><con1:actions><con1:assign varName="localValidationMessages"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7fb3</con2:id><con1:expr><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<excephdlr:validationMessages>
<validationMessage>
<code>ESB-GERAL-0030</code>
<message>É necessário informar apenas uma das entidades: identificacaoContrato ou identificacaoProposta.</message>
</validationMessage>
</excephdlr:validationMessages>]]></con2:xqueryText></con1:expr></con1:assign><con1:Error><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7fb2</con2:id><con1:errCode>ESB-GERAL-0030</con1:errCode><con1:message>É necessário informar apenas uma das entidades: identificacaoContrato ou identificacaoProposta</con1:message></con1:Error></con1:actions></con1:case><con1:case><con1:condition><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">(not($body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoProposta/node())
or $body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoProposta/idenpro:Proposta/idenpro:NumeroProposta eq "")
and (not($body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoContrato/node())
	 or $body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoContrato/idencon:Contrato/idencon:NumeroContrato eq "")</con2:xqueryText></con1:condition><con1:actions><con1:assign varName="localValidationMessages"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7fb3</con2:id><con1:expr><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<excephdlr:validationMessages>
<validationMessage>
<code>ESB-GERAL-0031</code>
<message>É necessário informar identificacaoContrato ou identificacaoProposta.</message>
</validationMessage>
</excephdlr:validationMessages>]]></con2:xqueryText></con1:expr></con1:assign><con1:Error><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7fb2</con2:id><con1:errCode>ESB-GERAL-0031</con1:errCode><con1:message>É necessário informar identificacaoContrato ou identificacaoProposta.</con1:message></con1:Error></con1:actions></con1:case><con1:default/></con1:ifThenElse></con:actions></con:stage><con:stage name="Estágio de chamada dos serviços Identificação Contrato ou Identificação Proposta" errorHandler="_onErrorHandler-7138670890548299665--e1d69d3.1270b68eb4f.-7f7e"><con:context><con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/identificacaoContrato" prefix="idencon" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/><con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/identificacaoContratoProposta" prefix="idenconpro" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/><con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/identificacaoProposta" prefix="idenpro" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/><con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="idenconresp" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/><con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContratoProposta12V1" prefix="idenconproresp" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/><con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoProposta12V1" prefix="idenproresp" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/></con:context><con:actions><con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7fa8</con2:id><con1:case><con1:condition><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">($body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoContrato/node()
and $body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoContrato/idencon:Contrato/idencon:NumeroContrato ne "")
and (fn:not($body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoProposta/node())
	 or $body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoProposta/idenpro:Proposta/idenpro:NumeroProposta eq "")</con2:xqueryText></con1:condition><con1:actions><con1:wsCallout><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1503470935995913670-f5bc16c.126425e1a04.-7ff4</con2:id><con1:service xsi:type="ref:ProxyRef" ref="general/NETSMSDatabaseConfig/proxyservice/TransformaIdentificacaoContrato12V1" xmlns:ref="http://www.bea.com/wli/sb/reference" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/><con1:operation>transformaIdentificacaoContrato</con1:operation><con1:request><con1:body>$transformaIdentificacaoContratoRequest</con1:body></con1:request><con1:response><con1:body>transformaIdentificacaoContratoResponse</con1:body></con1:response><con1:requestTransform><con1:assign varName="transformaIdentificacaoContratoRequest"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1503470935995913670-f5bc16c.126425e1a04.-7ff2</con2:id><con1:expr><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<idencon:IdentificacaoContrato>
	<idencon:SmartCard>{fn:data($body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoContrato/idencon:SmartCard)}</idencon:SmartCard>
	<idencon:Contrato>
		<idencon:NumeroContrato>{fn:data($body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoContrato/idencon:Contrato/idencon:NumeroContrato)}</idencon:NumeroContrato>
		<idencon:CodigoOperadora>{fn:data($body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoContrato/idencon:Contrato/idencon:CodigoOperadora)}</idencon:CodigoOperadora>
		<idencon:IdentificacaoCidade>{fn:data($body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoContrato/idencon:Contrato/idencon:IdentificacaoCidade)}</idencon:IdentificacaoCidade>
	</idencon:Contrato>
	<idencon:Protocolo>{fn:data($body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoContrato/idencon:Protocolo)}</idencon:Protocolo>
	<idencon:EnderecoMAC>{fn:data($body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoContrato/idencon:EnderecoMAC)}</idencon:EnderecoMAC>
</idencon:IdentificacaoContrato>]]></con2:xqueryText></con1:expr></con1:assign></con1:requestTransform><con1:responseTransform><con1:assign varName="identificacaoContratoPropostaResponse"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1503470935995913670-f5bc16c.126425e1a04.-7fe8</con2:id><con1:expr><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<idenconproresp:IdentificacaoContratoPropostaResponse>
	<idenconproresp:IdentificacaoProposta/>
	<idenconproresp:IdentificacaoContrato>
		<idenconproresp:SmartCard>{fn:data($transformaIdentificacaoContratoResponse/idenconresp:SmartCard)}</idenconproresp:SmartCard>
		<idenconproresp:Contrato>
			<idenconproresp:NumeroContrato>{fn:data($transformaIdentificacaoContratoResponse/idenconresp:Contrato/idenconresp:NumeroContrato)}</idenconproresp:NumeroContrato>
			<idenconproresp:CodigoOperadora>{fn:data($transformaIdentificacaoContratoResponse/idenconresp:Contrato/idenconresp:CodigoOperadora)}</idenconproresp:CodigoOperadora>
			<idenconproresp:IdentificacaoCidade>{fn:data($transformaIdentificacaoContratoResponse/idenconresp:Contrato/idenconresp:IdentificacaoCidade)}</idenconproresp:IdentificacaoCidade>
		</idenconproresp:Contrato>
		<idenconproresp:Protocolo>{fn:data($transformaIdentificacaoContratoResponse/idenconresp:Protocolo)}</idenconproresp:Protocolo>
		<idenconproresp:EnderecoMAC>{fn:data($transformaIdentificacaoContratoResponse/idenconresp:EnderecoMAC)}</idenconproresp:EnderecoMAC>
		<idenconproresp:AliasDatabase>{fn:data($transformaIdentificacaoContratoResponse/idenconresp:AliasDatabase)}</idenconproresp:AliasDatabase>
	</idenconproresp:IdentificacaoContrato>
</idenconproresp:IdentificacaoContratoPropostaResponse>]]></con2:xqueryText></con1:expr></con1:assign><con1:replace varName="body" contents-only="true"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1503470935995913670-f5bc16c.126425e1a04.-7fe9</con2:id><con1:location><con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText></con1:location><con1:expr><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$identificacaoContratoPropostaResponse</con2:xqueryText></con1:expr></con1:replace></con1:responseTransform></con1:wsCallout></con1:actions></con1:case><con1:default><con1:wsCallout><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1503470935995913670-f5bc16c.126425e1a04.-7fef</con2:id><con1:service xsi:type="ref:ProxyRef" ref="general/NETSMSDatabaseConfig/proxyservice/TransformaIdentificacaoProposta12V1" xmlns:ref="http://www.bea.com/wli/sb/reference" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/><con1:operation>transformaIdentificacaoProposta</con1:operation><con1:request><con1:body>$transformaIdentificacaoPropostaRequest</con1:body></con1:request><con1:response><con1:body>transformaIdentificacaoPropostaResponse</con1:body></con1:response><con1:requestTransform><con1:assign varName="transformaIdentificacaoPropostaRequest"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1503470935995913670-f5bc16c.126425e1a04.-7fed</con2:id><con1:expr><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<idenpro:IdentificacaoProposta>
	<idenpro:Protocolo>{fn:data($body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoProposta/idenpro:Protocolo)}</idenpro:Protocolo>
	<idenpro:Proposta>
		<idenpro:NumeroProposta>{fn:data($body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoProposta/idenpro:Proposta/idenpro:NumeroProposta)}</idenpro:NumeroProposta>
		<idenpro:CodigoOperadora>{fn:data($body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoProposta/idenpro:Proposta/idenpro:CodigoOperadora)}</idenpro:CodigoOperadora>
		<idenpro:IdentificacaoCidade>{fn:data($body/idenconpro:IdentificacaoContratoProposta/idenconpro:IdentificacaoProposta/idenpro:Proposta/idenpro:IdentificacaoCidade)}</idenpro:IdentificacaoCidade>
	</idenpro:Proposta>
</idenpro:IdentificacaoProposta>]]></con2:xqueryText></con1:expr></con1:assign></con1:requestTransform><con1:responseTransform><con1:assign varName="identificacaoContratoPropostaResponse"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1503470935995913670-f5bc16c.126425e1a04.-7fe7</con2:id><con1:expr><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<idenconproresp:IdentificacaoContratoPropostaResponse>
	<idenconproresp:IdentificacaoProposta>
		<idenconproresp:Protocolo>{fn:data($transformaIdentificacaoPropostaResponse/idenproresp:Protocolo)}</idenconproresp:Protocolo>
		<idenconproresp:Proposta>
			<idenconproresp:NumeroProposta>{fn:data($transformaIdentificacaoPropostaResponse/idenproresp:Proposta/idenproresp:NumeroProposta)}</idenconproresp:NumeroProposta>
			<idenconproresp:CodigoOperadora>{fn:data($transformaIdentificacaoPropostaResponse/idenproresp:Proposta/idenproresp:CodigoOperadora)}</idenconproresp:CodigoOperadora>
			<idenconproresp:IdentificacaoCidade>{fn:data($transformaIdentificacaoPropostaResponse/idenproresp:Proposta/idenproresp:IdentificacaoCidade)}</idenconproresp:IdentificacaoCidade>
		</idenconproresp:Proposta>
		<idenconproresp:AliasDatabase>{fn:data($transformaIdentificacaoPropostaResponse/idenproresp:AliasDatabase)}</idenconproresp:AliasDatabase>
	</idenconproresp:IdentificacaoProposta>
	<idenconproresp:IdentificacaoContrato/>
</idenconproresp:IdentificacaoContratoPropostaResponse>]]></con2:xqueryText></con1:expr></con1:assign><con1:replace varName="body" contents-only="true"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1503470935995913670-f5bc16c.126425e1a04.-7fe6</con2:id><con1:location><con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText></con1:location><con1:expr><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$identificacaoContratoPropostaResponse</con2:xqueryText></con1:expr></con1:replace></con1:responseTransform></con1:wsCallout></con1:default></con1:ifThenElse></con:actions></con:stage></con:pipeline><con:pipeline type="response" name="Transforma Identificacao Contrato Proposta_response" xmlns:con="http://www.bea.com/wli/sb/pipeline/config"/><con:pipeline type="error" name="_onErrorHandler-7138670890548299665--e1d69d3.1270b68eb4f.-7fb1" xmlns:con="http://www.bea.com/wli/sb/pipeline/config"><con:stage name="Estágio Erro Handler Validações"><con:context/><con:actions><con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7fb0</con2:id><con1:expr><con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config"><con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/><con2:param name="additionalInformation"><con2:path>$null</con2:path></con2:param><con2:param name="currentFault"><con2:path>$fault</con2:path></con2:param><con2:param name="exceptionStackTrace"><con2:path>''</con2:path></con2:param><con2:param name="accessResourceName"><con2:path>''</con2:path></con2:param><con2:param name="responseSOAPVersion"><con2:path>'1.2'</con2:path></con2:param><con2:param name="currentBody"><con2:path>$body</con2:path></con2:param><con2:param name="exceptionClassification"><con2:path>'CLASSIFICATION_VALIDATION'</con2:path></con2:param><con2:param name="messageParameters"><con2:path>$localMessageParameters</con2:path></con2:param><con2:param name="processo"><con2:path>'geral'</con2:path></con2:param><con2:param name="macroProcesso"><con2:path>'GENERAL'</con2:path></con2:param><con2:param name="validationMessages"><con2:path>$localValidationMessages</con2:path></con2:param><con2:param name="callResponse"><con2:path>$null</con2:path></con2:param><con2:param name="messageCode"><con2:path>data($fault/ctx:errorCode)</con2:path></con2:param><con2:param name="currentInbound"><con2:path>$inbound</con2:path></con2:param></con2:xqueryTransform></con1:expr></con1:assign><con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7faf</con2:id><con1:errCode>LOCAL_VALIDATION</con1:errCode></con1:Error></con:actions></con:stage></con:pipeline><con:pipeline type="error" name="_onErrorHandler-7138670890548299665--e1d69d3.1270b68eb4f.-7f7e" xmlns:con="http://www.bea.com/wli/sb/pipeline/config"><con:stage name="Estágio Tratamento da chamada dos serviços Identificação Contrato ou Identificação Proposta"><con:context/><con:actions><con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7f7d</con2:id><con1:expr><con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config"><con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/><con2:param name="additionalInformation"><con2:path>$null</con2:path></con2:param><con2:param name="currentFault"><con2:path>$fault</con2:path></con2:param><con2:param name="exceptionStackTrace"><con2:path>''</con2:path></con2:param><con2:param name="accessResourceName"><con2:path>''</con2:path></con2:param><con2:param name="responseSOAPVersion"><con2:path>'1.2'</con2:path></con2:param><con2:param name="currentBody"><con2:path>$body</con2:path></con2:param><con2:param name="exceptionClassification"><con2:path>'CLASSIFICATION_UNEXPECTED'</con2:path></con2:param><con2:param name="messageParameters"><con2:path>$localMessageParameters</con2:path></con2:param><con2:param name="processo"><con2:path>'geral'</con2:path></con2:param><con2:param name="macroProcesso"><con2:path>'GENERAL'</con2:path></con2:param><con2:param name="callResponse"><con2:path>$identificacaoContratoPropostaResponse</con2:path></con2:param><con2:param name="validationMessages"><con2:path>&lt;validationMessages/></con2:path></con2:param><con2:param name="messageCode"><con2:path>'ESB-GERAL-0012'</con2:path></con2:param><con2:param name="currentInbound"><con2:path>$inbound</con2:path></con2:param></con2:xqueryTransform></con1:expr></con1:assign><con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7f7c</con2:id><con1:errCode>LOCA_EXCEPTION</con1:errCode></con1:Error></con:actions></con:stage></con:pipeline><con:pipeline type="error" name="_onErrorHandler-7138670890548299665--e1d69d3.1270b68eb4f.-7f7b" xmlns:con="http://www.bea.com/wli/sb/pipeline/config"><con:stage name="Estagio Erro Handler Proxy"><con:context><con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/><con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/errorinfo" prefix="errorInfo" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/><con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/></con:context><con:actions><con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7f7a</con2:id><con1:case><con1:condition><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">empty($errorHandlerRequest)</con2:xqueryText></con1:condition><con1:actions><con1:assign varName="errorHandlerRequest"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7f79</con2:id><con1:expr><con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config"><con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/><con2:param name="additionalInformation"><con2:path>$null</con2:path></con2:param><con2:param name="currentFault"><con2:path>$faul</con2:path></con2:param><con2:param name="exceptionStackTrace"><con2:path>''</con2:path></con2:param><con2:param name="accessResourceName"><con2:path>'TransformaIdentificacaoContratoProposta12V1'</con2:path></con2:param><con2:param name="responseSOAPVersion"><con2:path>'1.2'</con2:path></con2:param><con2:param name="currentBody"><con2:path>$body</con2:path></con2:param><con2:param name="exceptionClassification"><con2:path>'CLASSIFICATION_UNEXPECTED'</con2:path></con2:param><con2:param name="messageParameters"><con2:path>$localMessageParameters</con2:path></con2:param><con2:param name="processo"><con2:path>'geral'</con2:path></con2:param><con2:param name="macroProcesso"><con2:path>'GENERAL'</con2:path></con2:param><con2:param name="callResponse"><con2:path>$identificacaoContratoPropostaResponse</con2:path></con2:param><con2:param name="validationMessages"><con2:path>&lt;validationMessages/></con2:path></con2:param><con2:param name="messageCode"><con2:path>$fault/ctx:errorCode</con2:path></con2:param><con2:param name="currentInbound"><con2:path>$inbound</con2:path></con2:param></con2:xqueryTransform></con1:expr></con1:assign></con1:actions></con1:case><con1:default/></con1:ifThenElse><con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7f78</con2:id><con1:service xsi:type="ref:ProxyRef" ref="general/NETESBExceptionHandler/proxyservice/NETESBExceptionHandler12V1" xmlns:ref="http://www.bea.com/wli/sb/reference" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"/><con1:operation>convertLocalExceptionToFault</con1:operation><con1:request><con1:body>$errorHandlerRequest</con1:body></con1:request><con1:response><con1:body>errorHandlerResponse</con1:body></con1:response><con1:requestTransform/><con1:responseTransform/></con1:wsCallout><con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7f77</con2:id><con1:case><con1:condition><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">($inbound//ctx:transport/ctx:request/http:client-host/node() and
$inbound//ctx:transport/ctx:request/http:client-host ne "")
or
($inbound//ctx:transport/ctx:request/http:client-address/node() and 
$inbound//ctx:transport/ctx/request/http:client-address ne "")</con2:xqueryText></con1:condition><con1:actions><con1:ifThenElse><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7f71</con2:id><con1:case><con1:condition><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">exists($errorHandlerResponse/soap12-env:Fault)</con2:xqueryText></con1:condition><con1:actions><con1:replace varName="body" contents-only="true"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7f70</con2:id><con1:location><con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText></con1:location><con1:expr><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorHandlerResponse/soap12-env:Fault</con2:xqueryText></con1:expr></con1:replace></con1:actions></con1:case><con1:default><con1:replace varName="body" contents-only="true"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7f6f</con2:id><con1:location><con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText></con1:location><con1:expr><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorHandlerResponse/soap-env:Fault</con2:xqueryText></con1:expr></con1:replace></con1:default></con1:ifThenElse><con2:reply isError="true" xmlns:con2="http://www.bea.com/wli/sb/stages/config"><con2:id>_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7f6e</con2:id></con2:reply></con1:actions></con1:case><con1:default><con1:replace varName="fault" contents-only="false"><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7138670890548299665--e1d69d3.1270b68eb4f.-7f76</con2:id><con1:location><con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText></con1:location><con1:expr><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorHandlerResponse/ctx:fault</con2:xqueryText></con1:expr></con1:replace></con1:default></con1:ifThenElse></con:actions></con:stage></con:pipeline><con:flow xmlns:con="http://www.bea.com/wli/sb/pipeline/config"><con:pipeline-node name="Transforma Identificacao Contrato Proposta"><con:request>Transforma Identificacao Contrato Proposta_request</con:request><con:response>Transforma Identificacao Contrato Proposta_response</con:response></con:pipeline-node></con:flow></ser:router>
</xml-fragment>