<?xml version="1.0" encoding="UTF-8"?>
<xml-fragment xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:http="http://www.bea.com/wli/sb/transports/http">
  <ser:coreEntry isProxy="true" isEnabled="true" isAutoPublish="false" isTracingEnabled="true" xmlns:ser="http://www.bea.com/wli/sb/services">
    <ser:description>Proxy de entrada para o serviço Contrato Venda, versão 2.0.
Versão SOAP: 1.2.
O Proxy contém as operações validarDadoCadastralTitular, alterarDadoCadastralTitular, 
validarDadoContatoTitular e alterarDadoContatoTitular, que fazem 
chamadas às respectivas operações no WLI. A operação consultarDadoCadastralTitular faz chamada ao 
ALDSP do ClienteProspect. A operação default retorna uma mensagem de erro informando que a 
operação solicitada é inválida.</ser:description>
    <ser:binding type="SOAP" isSoap12="true" xsi:type="con:SoapBindingType" xmlns:con="http://www.bea.com/wli/sb/services/bindings/config">
      <con:wsdl ref="relacionar/atendimento/contratovenda/wsdl/proxyservice/ContratoVendaWSDLV2_0"/>
      <con:port>
        <con:name>ContratoVendaPort12</con:name>
        <con:namespace>http://www.netservicos.com.br/ContratoVendaV2/</con:namespace>
      </con:port>
      <con:selector type="SOAP body"/>
    </ser:binding>
    <ser:monitoring isEnabled="true">
      <ser:aggregationInterval>10</ser:aggregationInterval>
    </ser:monitoring>
    <ser:reporting>false</ser:reporting>
    <ser:logging isEnabled="true">
      <ser:logLevel>debug</ser:logLevel>
    </ser:logging>
    <ser:sla-alerting isEnabled="false">
      <ser:alertLevel>warning</ser:alertLevel>
    </ser:sla-alerting>
    <ser:pipeline-alerting isEnabled="false">
      <ser:alertLevel>warning</ser:alertLevel>
    </ser:pipeline-alerting>
    <ser:ws-policy>
      <ser:binding-mode>wsdl-policy-attachments</ser:binding-mode>
    </ser:ws-policy>
    <ser:throttling enabled="false">
      <ser:capacity>0</ser:capacity>
      <ser:maxQueueLength>0</ser:maxQueueLength>
      <ser:timeToLive>0</ser:timeToLive>
    </ser:throttling>
  </ser:coreEntry>
  <ser:endpointConfig xmlns:ser="http://www.bea.com/wli/sb/services">
    <tran:provider-id xmlns:tran="http://www.bea.com/wli/sb/transports">http</tran:provider-id>
    <tran:inbound xmlns:tran="http://www.bea.com/wli/sb/transports">true</tran:inbound>
    <tran:URI xmlns:tran="http://www.bea.com/wli/sb/transports">
      <env:value xmlns:env="http://www.bea.com/wli/config/env">/relacionar/atendimento/contratovenda/ContratoVenda12V2</env:value>
    </tran:URI>
    <tran:inbound-properties xmlns:tran="http://www.bea.com/wli/sb/transports"/>
    <tran:all-headers xmlns:tran="http://www.bea.com/wli/sb/transports">false</tran:all-headers>
    <tran:provider-specific xmlns:tran="http://www.bea.com/wli/sb/transports"><http:inbound-properties><http:client-authentication xsi:type="http:HttpBasicAuthenticationType"/></http:inbound-properties><http:dispatch-policy>TOLFila-WorkManager</http:dispatch-policy></tran:provider-specific>
  </ser:endpointConfig>
  <ser:router errorHandler="_onErrorHandler-6646599901486708159--657e4dc3.125d5214479.-7fff" xmlns:ser="http://www.bea.com/wli/sb/services">
    <con:pipeline type="request" name="Operação Consultar Dado Cadastral Titular_request" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Trata NETHeader">
        <con:comment>Estágio onde é efetuado o tratamento do NetHeader.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="netheader" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:replace varName="header" contents-only="true" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7887230296732919649-125cf5c7.1262d1d196c.-7fff</con2:id>
            <con1:location>
              <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText>
            </con1:location>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/transformation/TransformarNetHeaderDefaults"/>
                <con2:param name="tokenDefault">
                  <con2:path>fn-bea:uuid()</con2:path>
                </con2:param>
                <con2:param name="netHeaderIN">
                  <con2:path>$header//netheader:NetHeader</con2:path>
                </con2:param>
                <con2:param name="numeroProtocoloDefault">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="aplicacaoDefault">
                  <con2:path>'OTHER'</con2:path>
                </con2:param>
                <con2:param name="funcionalidadeDefault">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="versaoServicoDefault">
                  <con2:path>'2.0'</con2:path>
                </con2:param>
                <con2:param name="usernameDefault">
                  <con2:path>fn:data($inbound/ctx:security/ctx:transportClient/ctx:username)</con2:path>
                </con2:param>
                <con2:param name="numeroChamadaDefault">
                  <con2:path>''</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:replace>
        </con:actions>
      </con:stage>
      <con:stage name="Identificação do Contrato" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-8000">
        <con:comment>Estágio que efetua chamada ao serviço
"TransformaIdentificacaoContrato12V1" 
para fazer a identificação do contrato 
informado.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="trans" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/><con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fc6</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body</con2:xqueryText>
            </con1:expr>
            <con1:message>Dados de Entrada Consultar Dado Cadastral</con1:message>
          </con1:log>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-8000</con2:id>
            <con1:service xsi:type="ref:ProxyRef" ref="general/NETSMSDatabaseConfig/proxyservice/TransformaIdentificacaoContrato12V1" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>transformaIdentificacaoContrato</con1:operation>
            <con1:request>
              <con1:body>$identificarContratoRequest</con1:body>
            </con1:request>
            <con1:response>
              <con1:body>localCallResponse</con1:body>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="identificarContratoRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7fff</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ConsultarDadoCadastralTitularIdentificarContratoXQuery"/>
                    <con2:param name="parametrosConsultarDadoCadastralTitular1">
                      <con2:path>$body/con:parametrosConsultarDadoCadastralTitular</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ffe</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$identificarContratoRequest</con3:xqueryText>
                </con2:expr>
                <con2:message>identificarContratoRequest</con2:message>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="identificarContratoResponse">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fbc</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localCallResponse</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ffd</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$identificarContratoResponse</con3:xqueryText>
                </con2:expr>
                <con2:message>identificarContratoResponse</con2:message>
              </con2:log>
            <con1:transport-headers><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7827888599031603882-57a499ea.17f1dd7e987.-8000</con2:id><con1:header-set>inbound-response</con1:header-set><con1:header name="SOA-Base" value="expression"><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($identificarContratoResponse/trans:AliasDatabase)</con2:xqueryText></con1:header></con1:transport-headers></con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
      <con:stage name="Efetua a Consulta Dado Cadastral Titular" errorHandler="_onErrorHandler-7887230296732919649-125cf5c7.1262d1d196c.-7ffb">
        <con:comment>Estágio responsável por efetuar a chamada 
a operação consultarClientePorContrato do
proxy ClienteProspectDSLBSV1_0.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="tran" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ff7</con2:id>
            <con1:service xsi:type="ref:BusinessServiceRef" ref="relacionar/atendimento/clienteprospect/businessservice/ClienteProspectDSLBSV1_0" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>consultarClientePorContrato</con1:operation>
            <con1:request>
              <con1:body>$consultaDadoCadastralTitularRequest</con1:body>
            </con1:request>
            <con1:response>
              <con1:body>localCallResponse</con1:body>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="consultaDadoCadastralTitularRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ff2</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ConsultarClienteDadoCadastralRequestXQuery"/>
                    <con2:param name="identificacaoContratoResponse1">
                      <con2:path>$identificarContratoResponse</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con1:transport-headers copy-all="false">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4153836595675112583--68137224.122a7da6bdf.-7f68</con2:id>
                <con1:header-set>outbound-request</con1:header-set>
                <con1:header name="j_identity_base" value="expression">
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($identificarContratoResponse/tran:AliasDatabase)</con2:xqueryText>
                </con1:header>
              </con1:transport-headers>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ff4</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$consultaDadoCadastralTitularRequest</con3:xqueryText>
                </con2:expr>
                <con2:message>consultaDadoCadastralTitularRequest</con2:message>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="consultaDadoCadastralTitularResponse">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fba</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localCallResponse</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ff3</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$consultaDadoCadastralTitularResponse</con3:xqueryText>
                </con2:expr>
                <con2:message>consultaDadoCadastralTitularResponse</con2:message>
              </con2:log>
              <con1:assign varName="consultaDadoCadastralTitularResponse">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4211614720073563462--51c0637e.125e0ad3d5a.-8000</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ConsultarClienteDadoCadastralResponseXQuery"/>
                    <con2:param name="consultarClientePorContratoResponse1">
                      <con2:path>$consultaDadoCadastralTitularResponse</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
            </con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="response" name="Operação Consultar Dado Cadastral Titular_response" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Resposta Ao Cliente">
        <con:comment>Efetua o tratamento do retorno antes de ser enviado
ao cliente.</con:comment>
        <con:context/>
        <con:actions>
          <con1:replace varName="body" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ff1</con2:id>
            <con1:location>
              <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText>
            </con1:location>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Body>
	{$consultaDadoCadastralTitularResponse}
&lt;/soap12-env:Body></con2:xqueryText>
            </con1:expr>
          </con1:replace>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7fef</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body</con2:xqueryText>
            </con1:expr>
            <con1:message>Resposta ao Cliente DSL</con1:message>
          </con1:log>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-6646599901486708159--657e4dc3.125d5214479.-7fff" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Error Handler Proxy">
        <con:comment>Estágio de tratamento de erro do proxy, 
antes de ser enviado para o cliente.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/errorinfo" prefix="errorInfo" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fbe</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro no Proxy ContratoVenda12V2</con1:message>
          </con1:log>
          <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fd2</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">empty($errorHandlerRequest)</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6222262913022267811--6a397a08.123bdf892ab.-7fef</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="errorHandlerRequest">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6222262913022267811--6a397a08.123bdf892ab.-7ffd</con2:id>
                  <con1:expr>
                    <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                      <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                      <con2:param name="additionalInformation">
                        <con2:path>$null</con2:path>
                      </con2:param>
                      <con2:param name="currentFault">
                        <con2:path>$fault</con2:path>
                      </con2:param>
                      <con2:param name="exceptionStackTrace">
                        <con2:path>''</con2:path>
                      </con2:param>
                      <con2:param name="accessResourceName">
                        <con2:path>'ContratoVenda12V2.Estágio ErrorHandler Proxy'</con2:path>
                      </con2:param>
                      <con2:param name="responseSOAPVersion">
                        <con2:path>1.2</con2:path>
                      </con2:param>
                      <con2:param name="currentBody">
                        <con2:path>$body</con2:path>
                      </con2:param>
                      <con2:param name="exceptionClassification">
                        <con2:path>'CLASSIFICATION_UNEXPECTED'</con2:path>
                      </con2:param>
                      <con2:param name="processo">
                        <con2:path>'atendimento'</con2:path>
                      </con2:param>
                      <con2:param name="messageParameters">
                        <con2:path>$localMessageParameters</con2:path>
                      </con2:param>
                      <con2:param name="macroProcesso">
                        <con2:path>'RELACIONAR'</con2:path>
                      </con2:param>
                      <con2:param name="callResponse">
                        <con2:path>$localCallResponse</con2:path>
                      </con2:param>
                      <con2:param name="validationMessages">
                        <con2:path>&lt;validationMessages/></con2:path>
                      </con2:param>
                      <con2:param name="messageCode">
                        <con2:path>'ESB-ATEND-0003'</con2:path>
                      </con2:param>
                      <con2:param name="currentInbound">
                        <con2:path>$inbound</con2:path>
                      </con2:param>
                    </con2:xqueryTransform>
                  </con1:expr>
                </con1:assign>
              </con1:actions>
            </con1:case>
            <con1:default/>
          </con1:ifThenElse>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fcf</con2:id>
            <con1:service xsi:type="ref:ProxyRef" ref="general/NETESBExceptionHandler/proxyservice/NETESBExceptionHandler12V1" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>convertLocalExceptionToFault</con1:operation>
            <con1:request>
              <con1:body>$errorHandlerRequest</con1:body>
            </con1:request>
            <con1:response>
              <con1:body>errorHandlerResponse</con1:body>
            </con1:response>
            <con1:requestTransform/>
            <con1:responseTransform>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-6222262913022267811--6a397a08.123bdf892ab.-7fe9</con3:id>
                <con2:logLevel>error</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$errorHandlerResponse</con3:xqueryText>
                </con2:expr>
                <con2:message>errorHandlerResponse</con2:message>
              </con2:log>
            </con1:responseTransform>
          </con1:wsCallout>
          <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fcd</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">($inbound//ctx:transport/ctx:request/http:client-host/node() and
$inbound//ctx:transport/ctx:request/http:client-host ne "")
or
($inbound//ctx:transport/ctx:request/http:client-address/node() and
$inbound//ctx:transport/ctx:request/http:client-address ne "")</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                  <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8244092632030730457-4c5f7229.123bf7c9eff.-7fdb</con3:id>
                  <con2:logLevel>error</con2:logLevel>
                  <con2:message>Chamada Externa, gerar Log e Alerta ContratoVenda12V2.proxy</con2:message>
                </con2:log>
                <con1:wsCallout>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8244092632030730457-4c5f7229.123bf7c9eff.-7ff7</con2:id>
                  <con1:service xsi:type="ref:ProxyRef" ref="general/NETLog/proxyservice/FormatLogMessage12" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                  <con1:operation>formatLogMessage</con1:operation>
                  <con1:request>
                    <con1:body>$formatLogMessageRequest</con1:body>
                  </con1:request>
                  <con1:response>
                    <con1:body>formatLogMessageResponse</con1:body>
                  </con1:response>
                  <con1:requestTransform>
                    <con1:assign varName="formatLogMessageRequest">
                      <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8244092632030730457-4c5f7229.123bf7c9eff.-7ff4</con2:id>
                      <con1:expr>
                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<for:logMessage xmlns:log="http://www.netservicos.com.br/modelocanonico/v2/logging" xmlns:for="http://www.netservicos.com.br/FormatLogMessage">
   <log:transactionId>{fn:data($header//token)}</log:transactionId>
   <log:logType>ERROR</log:logType>
   <log:messageCode>{'ESB-ATEND-0003'}</log:messageCode>
   <log:messageParameters/>
      

   <log:username>{fn:data($header//username)}</log:username>
   <log:timestamp>{fn:data(fn:current-dateTime())}</log:timestamp>
   <log:errorInfo>{ $errorHandlerResponse//errorInfo:ErrorInfo/@* , $errorHandlerResponse//errorInfo:ErrorInfo/node() }</log:errorInfo>
   <log:macroProcesso>RELACIONAR</log:macroProcesso>
   <log:processo>atendimento</log:processo>
   <log:consumidor>{fn:data($header//aplicacao)}</log:consumidor>
</for:logMessage>]]></con2:xqueryText>
                      </con1:expr>
                    </con1:assign>
                    <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                      <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8244092632030730457-4c5f7229.123bf7c9eff.-7fe5</con3:id>
                      <con2:logLevel>error</con2:logLevel>
                      <con2:expr>
                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$formatLogMessageRequest</con3:xqueryText>
                      </con2:expr>
                      <con2:message>formatLogMessageRequest</con2:message>
                    </con2:log>
                  </con1:requestTransform>
                  <con1:responseTransform>
                    <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                      <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8244092632030730457-4c5f7229.123bf7c9eff.-7ff5</con3:id>
                      <con2:logLevel>error</con2:logLevel>
                      <con2:expr>
                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">fn:data($formatLogMessageResponse//logging:message)</con3:xqueryText>
                      </con2:expr>
                      <con2:message/>
                    </con2:log>
                  </con1:responseTransform>
                </con1:wsCallout>
                <con1:wsCallout>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8244092632030730457-4c5f7229.123bf7c9eff.-7ff6</con2:id>
                  <con1:service xsi:type="ref:ProxyRef" ref="general/NETAlert/proxyservice/Alert12" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                  <con1:operation>alert</con1:operation>
                  <con1:request>
                    <con1:body>$alertRequest</con1:body>
                  </con1:request>
                  <con1:response>
                    <con1:body>alertResponse</con1:body>
                  </con1:response>
                  <con1:requestTransform>
                    <con1:assign varName="alertRequest">
                      <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8244092632030730457-4c5f7229.123bf7c9eff.-7ff3</con2:id>
                      <con1:expr>
                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<aler1:alert xmlns:aler="http://www.netservicos.com.br/modelocanonico/v2/alert" 
      xmlns:aler1="http://www.netservicos.com.br/Alert">
    <aler:timestamp>{data(fn:current-dateTime())}</aler:timestamp>
    <aler:transactionId>{fn:data($header//token)}</aler:transactionId>
    <aler:message>{fn:data($formatLogMessageResponse/logging:message)}</aler:message>
    <aler:serviceSeverityLevel>NIVEL1</aler:serviceSeverityLevel>
    <aler:consumidor>{fn:data($header//aplicacao)}</aler:consumidor>
    <aler:macroProcesso>RELACIONAR</aler:macroProcesso>
    <aler:macroProcessoNivel>atendimento</aler:macroProcessoNivel>
    <aler:macroProcessoSubNivel></aler:macroProcessoSubNivel>
    <aler:exceptionClassification>{fn:data($errorHandlerResponse//errorInfo:ErrorInfo/exceptionClassification)}</aler:exceptionClassification>
</aler1:alert>]]></con2:xqueryText>
                      </con1:expr>
                    </con1:assign>
                    <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                      <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8244092632030730457-4c5f7229.123bf7c9eff.-7fe4</con3:id>
                      <con2:logLevel>error</con2:logLevel>
                      <con2:expr>
                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$alertRequest</con3:xqueryText>
                      </con2:expr>
                      <con2:message>alertRequest</con2:message>
                    </con2:log>
                  </con1:requestTransform>
                  <con1:responseTransform/>
                </con1:wsCallout>
                <con1:ifThenElse>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3555177581869765560--435cd61a.1235c507cb0.-7ff7</con2:id>
                  <con1:case>
                    <con1:condition>
                      <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">exists($errorHandlerResponse/soap12-env:Fault)</con2:xqueryText>
                    </con1:condition>
                    <con1:actions>
                      <con1:replace varName="body" contents-only="true">
                        <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1294261124187035131--5825eaa6.122c84a2fab.-7ff0</con2:id>
                        <con1:location>
                          <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText>
                        </con1:location>
                        <con1:expr>
                          <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorHandlerResponse/soap12-env:Fault</con2:xqueryText>
                        </con1:expr>
                      </con1:replace>
                    </con1:actions>
                  </con1:case>
                  <con1:default>
                    <con1:replace varName="body" contents-only="true">
                      <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3555177581869765560--435cd61a.1235c507cb0.-7ff5</con2:id>
                      <con1:location>
                        <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText>
                      </con1:location>
                      <con1:expr>
                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorHandlerResponse/soap-env:Fault</con2:xqueryText>
                      </con1:expr>
                    </con1:replace>
                  </con1:default>
                </con1:ifThenElse>
          <con1:ifThenElse><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-118215193248057280-6920a02c.1731106cb6a.-8000</con2:id><con1:case><con1:condition><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:contains($body/soap-env:Fault/faultstring,
     "ORA-")</con2:xqueryText></con1:condition><con1:actions><con3:transport-headers xmlns:tran="http://www.bea.com/wli/sb/transports" xmlns:env="http://www.bea.com/wli/config/env" xmlns:con1="http://www.bea.com/wli/sb/stages/config" xmlns:con2="http://www.bea.com/wli/sb/stages/routing/config" xmlns:con3="http://www.bea.com/wli/sb/stages/transform/config"><con1:id>_ActionId-8357929311831198413--30d35dae.1720e402d09.-7ffe</con1:id><con3:header-set>inbound-response</con3:header-set><con3:header name="SOA-Code" value="expression"><con1:xqueryTransform><con1:resource ref="general/transformation/FormatTransportHeaderResponseORAErrorXQTv1"/><con1:param name="fault"><con1:path>$fault</con1:path></con1:param><con1:param name="body"><con1:path>$body</con1:path></con1:param></con1:xqueryTransform></con3:header></con3:transport-headers></con1:actions></con1:case><con1:default><con1:transport-headers>
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8860558302490276716--75ff3585.1699161cd2f.-8000</con2:id>
            <con1:header-set>inbound-response</con1:header-set>
            <con1:header name="SOA-Code" value="expression">
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/transformation/FormatTransportHeaderResponseCodeXQTv1"/>
                <con2:param name="body"><con2:path>$body</con2:path></con2:param>
                <con2:param name="fault"><con2:path>$fault</con2:path></con2:param>
              </con2:xqueryTransform>
	        </con1:header>
          </con1:transport-headers></con1:default></con1:ifThenElse>

                <con2:reply isError="true" xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                  <con2:id>_ActionId-1294261124187035131--5825eaa6.122c84a2fab.-7fef</con2:id>
                </con2:reply>
              </con1:actions>
            </con1:case>
            <con1:default>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8244092632030730457-4c5f7229.123bf7c9eff.-7fd8</con3:id>
                <con2:logLevel>error</con2:logLevel>
                <con2:message>Chamada Interna ContratoVenda12V2.proxy</con2:message>
              </con2:log>
              <con1:replace varName="fault" contents-only="false">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-300397596414783046-576bafbf.122bdda401c.-7fed</con2:id>
                <con1:location>
                  <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText>
                </con1:location>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$errorHandlerResponse/ctx:fault</con2:xqueryText>
                </con1:expr>
              </con1:replace>
            </con1:default>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="request" name="Operação Validar Dado Cadastral Titular_request" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Trata NETHeader">
        <con:comment>Estágio onde é efetuado o tratamento do NetHeader.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="netheader" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:replace varName="header" contents-only="true" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7887230296732919649-125cf5c7.1262d1d196c.-7fff</con2:id>
            <con1:location>
              <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText>
            </con1:location>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/transformation/TransformarNetHeaderDefaults"/>
                <con2:param name="tokenDefault">
                  <con2:path>fn-bea:uuid()</con2:path>
                </con2:param>
                <con2:param name="netHeaderIN">
                  <con2:path>$header//netheader:NetHeader</con2:path>
                </con2:param>
                <con2:param name="numeroProtocoloDefault">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="aplicacaoDefault">
                  <con2:path>'OTHER'</con2:path>
                </con2:param>
                <con2:param name="funcionalidadeDefault">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="versaoServicoDefault">
                  <con2:path>'2.0'</con2:path>
                </con2:param>
                <con2:param name="usernameDefault">
                  <con2:path>fn:data($inbound/ctx:security/ctx:transportClient/ctx:username)</con2:path>
                </con2:param>
                <con2:param name="numeroChamadaDefault">
                  <con2:path>''</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:replace>
        </con:actions>
      </con:stage>
      <con:stage name="Validação dados de Entrada" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f99">
        <con:comment>Estágio responsável por fazer a verificação 
de preenchimento dos campos obrigatórios 
exigidos pela operação.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/MessageUtil" prefix="ns0" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="netheader" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/identificacaoContrato" prefix="iden" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f57</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body</con2:xqueryText>
            </con1:expr>
            <con1:message>Entrada operação validarDadoCadastralTitular</con1:message>
          </con1:log>
          <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4155022511656800501--4e539935.125df69ed78.-7ffd</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/node())</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="validationMessage">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-301859766023057541-722f6248.12632bb33a9.-7fc4</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-301859766023057541-722f6248.12632bb33a9.-7fc3</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Dado Cadastral'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7fa1</con2:id>
                  <con1:errCode>ESB-ATEND-0012</con1:errCode>
                  <con1:message>Dado Cadastral</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">(not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/nome/node()) or fn:data($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/nome) eq "") and
(not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/codigoSuframa/node()) or fn:data($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/codigoSuframa eq "")) and
(not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/node()))</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fa5</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fff</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Dado Cadastral'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7fa1</con2:id>
                  <con1:errCode>ESB-ATEND-0012</con1:errCode>
                  <con1:message>Dado Cadastral</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">(not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/nome/node()) or fn:data($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/nome) eq "") and
(not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/codigoSuframa/node()) or fn:data($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/codigoSuframa eq "")) and





(not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/dataNascimento/node())) and

(not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/CPF/node()) or fn:data($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/CPF) eq "") and

(not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/RG/node()) or fn:data($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/RG) eq "") and

(not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/orgaoExpedidor/node()) or fn:data($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/orgaoExpedidor) eq "") and

not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/flagEstrangeiro/node()) and

(not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/nomePai/node()) or fn:data($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/nomePai) eq "") and

(not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/nomeMae/node()) or fn:data($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/nomeMae) eq "") and

not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/sexo/node()) and

not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/identificacaoEstadoCivil/node()) and

not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/identificacaoProfissao/node()) and

not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/identificacaoEscolaridade/node()) and

(not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/CNPJ/node()) or fn:data($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/CNPJ) eq "") and

not($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/InscricaoEstadual/node())</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fa5</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fff</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Dado Cadastral'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7fa1</con2:id>
                  <con1:errCode>ESB-ATEND-0012</con1:errCode>
                  <con1:message>Dado Cadastral</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">not($body/con:parametrosValidarDadoCadastralTitular/identificacaoContrato/node())</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fa5</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fff</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Identificação Contrato'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7fa1</con2:id>
                  <con1:errCode>ESB-ATEND-0012</con1:errCode>
                  <con1:message>Identificação Contrato</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
      <con:stage name="Identificação do Contrato" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f8e">
        <con:comment>Estágio que efetua chamada ao serviço
"TransformaIdentificacaoContrato12V1" 
para fazer a identificação do contrato 
informado.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="trans" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/><con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4155022511656800501--4e539935.125df69ed78.-7ff6</con2:id>
            <con1:service xsi:type="ref:ProxyRef" ref="general/NETSMSDatabaseConfig/proxyservice/TransformaIdentificacaoContrato12V1" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>transformaIdentificacaoContrato</con1:operation>
            <con1:request>
              <con1:body>$identificarContratoRequest</con1:body>
            </con1:request>
            <con1:response>
              <con1:body>localCallResponse</con1:body>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="identificarContratoRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7fff</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ValidarDadoCadastralTitularIdentificarContratoXQuery"/>
                    <con2:param name="parametrosValidarDadoCadastralTitular1">
                      <con2:path>$body/con:parametrosValidarDadoCadastralTitular</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ffe</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$identificarContratoRequest</con3:xqueryText>
                </con2:expr>
                <con2:message>identificarContratoRequest</con2:message>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="identificarContratoResponse">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fbd</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localCallResponse</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ffd</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$identificarContratoResponse</con3:xqueryText>
                </con2:expr>
                <con2:message>identificarContratoResponse</con2:message>
              </con2:log>
            <con1:transport-headers><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7827888599031603882-57a499ea.17f1dd7e987.-7ffe</con2:id><con1:header-set>inbound-response</con1:header-set><con1:header name="SOA-Base" value="expression"><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($identificarContratoResponse/trans:AliasDatabase)</con2:xqueryText></con1:header></con1:transport-headers></con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
      <con:stage name="Efetua a Consulta Dado Cadastral Titular" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f81">
        <con:comment>Estágio responsável por efetuar a chamada 
a operação consultarClientePorContrato do
proxy ClienteProspectDSLBSV1_0.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="tran" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-2838014697274776184--57aaadb4.125e4d0cda5.-7ff9</con2:id>
            <con1:service xsi:type="ref:BusinessServiceRef" ref="relacionar/atendimento/clienteprospect/businessservice/ClienteProspectDSLBSV1_0" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>consultarClientePorContrato</con1:operation>
            <con1:request>
              <con1:body>$consultarClientePorContratoRequest</con1:body>
            </con1:request>
            <con1:response>
              <con1:body>localCallResponse</con1:body>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="consultarClientePorContratoRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ff2</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ConsultarClienteDadoCadastralRequestXQuery"/>
                    <con2:param name="identificacaoContratoResponse1">
                      <con2:path>$identificarContratoResponse</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con1:transport-headers copy-all="false">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4153836595675112583--68137224.122a7da6bdf.-7f68</con2:id>
                <con1:header-set>outbound-request</con1:header-set>
                <con1:header name="j_identity_base" value="expression">
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($identificarContratoResponse/tran:AliasDatabase)</con2:xqueryText>
                </con1:header>
              </con1:transport-headers>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ff4</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$consultarClientePorContratoRequest</con3:xqueryText>
                </con2:expr>
                <con2:message>Request consultarClientePorContrato</con2:message>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="consultarClientePorContratoResponse">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f80</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localCallResponse</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ff3</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$consultarClientePorContratoResponse</con3:xqueryText>
                </con2:expr>
                <con2:message>Response consultarClientePorContrato</con2:message>
              </con2:log>
            </con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
      <con:stage name="Verifica se contrato existe" errorHandler="_onErrorHandler-6095354263032001506-51fecf5.127d967ba12.-7fe8">
        <con:comment>Estágio responsável por verificar se foi encontrado 
um contrato para o identificador de contrato informado.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/ClientePropesct/schemas" prefix="sch" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7fe9</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:not($consultarClientePorContratoResponse/sch:ClientesProspect//node())</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                  <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7ffd</con3:id>
                  <con2:logLevel>debug</con2:logLevel>
                  <con2:message>Contrato nao encontrado</con2:message>
                </con2:log>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7fdf</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7fde</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Efetua a Consulta Dado Cadastral Titular'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7fdd</con2:id>
                  <con1:errCode>ESB-ATEND-0017</con1:errCode>
                  <con1:message>Contrato não encontrado</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:default>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7fff</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:message>Contrato encontrado</con2:message>
              </con2:log>
            </con1:default>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
      <con:stage name="Verificação da entrada com o banco" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f73">
        <con:comment>Estágio responsável por verificar a igualdade dos 
dados cadastrados no banco de dados com 
os dados de entrada da operação.</con:comment>
        <con:context>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ClientePropesct/schemas" prefix="sch" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="ld:br/com/netservicos/atendimento/webservice/ClienteProspectJWS.ws" prefix="cli" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:assign varName="dadoCadastralTitularBase" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4069592398432316094--23e77c2b.1260eadd2c6.-8000</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ClienteProspectXValidarDadoCadastrarlTitularXQuery"/>
                <con2:param name="consultarClientePorContratoResponse1">
                  <con2:path>$consultarClientePorContratoResponse</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4069592398432316094--23e77c2b.1260eadd2c6.-7fff</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$dadoCadastralTitularBase</con2:xqueryText>
            </con1:expr>
            <con1:message>dadoCadastralTitularBase</con1:message>
          </con1:log>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f56</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular</con2:xqueryText>
            </con1:expr>
            <con1:message>dadoContatoTitularBody</con1:message>
          </con1:log>
          <con1:assign varName="dadoCadastralTitularComTodosCampos" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f55</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ValidarDadoCadastralTitularXCamposNulosXQuery"/>
                <con2:param name="dadoCadastralTitular1">
                  <con2:path>$body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular</con2:path>
                </con2:param>
                <con2:param name="consultarClientePorContratoResponse1">
                  <con2:path>$consultarClientePorContratoResponse</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="isEqual" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-129915237115333906-1542671.12603a6ba4f.-7fbd</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ValidarIgualdadeValidarDadoCadastralTitularXQuery"/>
                <con2:param name="dadoCadastralTitular1">
                  <con2:path>$dadoCadastralTitularComTodosCampos</con2:path>
                </con2:param>
                <con2:param name="tipoPessoa">
                  <con2:path>data($consultarClientePorContratoResponse/sch:ClientesProspect/sch:clienteProspect/sch:tipoPessoa)</con2:path>
                </con2:param>
                <con2:param name="dadoCadastralTitular2">
                  <con2:path>$dadoCadastralTitularBase</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7862862821673356410--4f00a2a4.125f91a986c.-7ff1</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">not(fn:contains(fn:upper-case(fn:data($body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular/pessoa/@xsi:type)),
fn:upper-case(data($consultarClientePorContratoResponse/sch:ClientesProspect/sch:clienteProspect/sch:tipoPessoa))))</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7862862821673356410--4f00a2a4.125f91a986c.-7ff0</con2:id>
                  <con1:errCode>ESB-ATEND-0014</con1:errCode>
                  <con1:message>Não é possível inserir dados de pessoas físicas para pessoas jurídicas e vice-versa.</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">xs:boolean($isEqual)</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-129915237115333906-1542671.12603a6ba4f.-7fc4</con2:id>
                  <con1:errCode>ESB-ATEND-0013</con1:errCode>
                  <con1:message>Nenhuma alteração foi realizada</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:default/>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
      <con:stage name="Chamada ao Validar Dado Cadastral Titular do WLI" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f66">
        <con:comment>Estágio responsável por efetuar a chamada 
a operação validarDadoCadastralTitular do 
business service "ContratoVendaJWSBSV1_0".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="tran" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="net" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8209393703415118201-2b9b361e.125fe4949aa.-7fd3</con2:id>
            <con1:service xsi:type="ref:BusinessServiceRef" ref="relacionar/atendimento/contratovenda/businessservice/ContratoVendaJWSBSV1_0" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>validarDadoCadastralTitular</con1:operation>
            <con1:request>
              <con1:body wrapped="true">$validarDadoCadastralTitularRequestBody</con1:body>
              <con1:header>$validarDadoCadastralTitularRequestHeader</con1:header>
            </con1:request>
            <con1:response>
              <con1:body wrapped="true">localCallResponse</con1:body>
              <con1:header>validarDadoCadastralTitularResponseHeader</con1:header>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="validarDadoCadastralRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8209393703415118201-2b9b361e.125fe4949aa.-7fdf</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ValidarDadoCadastralTitularXValidarWLIXQuery"/>
                    <con2:param name="dadoCadastralTitular1">
                      <con2:path>$body/con:parametrosValidarDadoCadastralTitular/dadoCadastralTitular</con2:path>
                    </con2:param>
                    <con2:param name="consultarClientePorContratoResponse1">
                      <con2:path>$consultarClientePorContratoResponse</con2:path>
                    </con2:param>
                    <con2:param name="identificacaoContratoResponse1">
                      <con2:path>$identificarContratoResponse</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="validarDadoCadastralTitularRequestBody">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7ff0</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Body>
{$validarDadoCadastralRequest}
&lt;/soap12-env:Body></con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="validarDadoCadastralTitularRequestHeader">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fef</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Header>
	{$header/net:NetHeader}
&lt;/soap12-env:Header></con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:transport-headers copy-all="true">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8209393703415118201-2b9b361e.125fe4949aa.-7fdb</con2:id>
                <con1:header-set>outbound-request</con1:header-set>
                <con1:header name="j_identity_base" value="expression">
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($identificarContratoResponse/tran:AliasDatabase)</con2:xqueryText>
                </con1:header>
              </con1:transport-headers>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8209393703415118201-2b9b361e.125fe4949aa.-7fde</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$validarDadoCadastralTitularRequestBody</con3:xqueryText>
                </con2:expr>
                <con2:message>Request Body validarDadoCadastralTitular</con2:message>
              </con2:log>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fee</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$validarDadoCadastralTitularRequestHeader</con3:xqueryText>
                </con2:expr>
                <con2:message>Request Header validarDadoCadastralTitular</con2:message>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="validarDadoCadastralTitularResponseBody">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f59</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localCallResponse</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8209393703415118201-2b9b361e.125fe4949aa.-7fde</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$validarDadoCadastralTitularResponseBody</con3:xqueryText>
                </con2:expr>
                <con2:message>Response Body validarDadoCadastralTitular</con2:message>
              </con2:log>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8209393703415118201-2b9b361e.125fe4949aa.-7fde</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$validarDadoCadastralTitularResponseHeader</con3:xqueryText>
                </con2:expr>
                <con2:message>Response Header validarDadoCadastralTitular</con2:message>
              </con2:log>
            </con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="response" name="Operação Validar Dado Cadastral Titular_response" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Retorno ao Cliente">
        <con:comment>Efetua o tratamento do retorno antes de ser enviado
ao cliente.</con:comment>
        <con:context>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:replace varName="body" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fc5</con2:id>
            <con1:location>
              <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText>
            </con1:location>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Body>
	&lt;con:resultadoValidarDadoCadastralTitular xmlns:con="http://www.netservicos.com.br/ContratoVendaV2/"/>
&lt;/soap12-env:Body></con2:xqueryText>
            </con1:expr>
          </con1:replace>
          <con1:replace varName="header" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3602396152036100354--4b147286.1242f8a876a.-7ff8</con2:id>
            <con1:location>
              <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText>
            </con1:location>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Header/></con2:xqueryText>
            </con1:expr>
          </con1:replace>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="request" name="Operação Alterar Dado Cadastral Titular_request" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Trata NETHeader">
        <con:comment>Estágio onde é efetuado o tratamento do NetHeader.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="netheader" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:replace varName="header" contents-only="true" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7887230296732919649-125cf5c7.1262d1d196c.-7fff</con2:id>
            <con1:location>
              <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText>
            </con1:location>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/transformation/TransformarNetHeaderDefaults"/>
                <con2:param name="tokenDefault">
                  <con2:path>fn-bea:uuid()</con2:path>
                </con2:param>
                <con2:param name="netHeaderIN">
                  <con2:path>$header//netheader:NetHeader</con2:path>
                </con2:param>
                <con2:param name="numeroProtocoloDefault">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="aplicacaoDefault">
                  <con2:path>'OTHER'</con2:path>
                </con2:param>
                <con2:param name="funcionalidadeDefault">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="versaoServicoDefault">
                  <con2:path>'2.0'</con2:path>
                </con2:param>
                <con2:param name="usernameDefault">
                  <con2:path>fn:data($inbound/ctx:security/ctx:transportClient/ctx:username)</con2:path>
                </con2:param>
                <con2:param name="numeroChamadaDefault">
                  <con2:path>''</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:replace>
        </con:actions>
      </con:stage>
      <con:stage name="Validação dados de Entrada" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f4c">
        <con:comment>Estágio responsável por fazer a verificação 
de preenchimento dos campos obrigatórios 
exigidos pela operação.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fc9</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body</con2:xqueryText>
            </con1:expr>
            <con1:message>Dados de Entrada Alterar dado cadastral</con1:message>
          </con1:log>
          <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4155022511656800501--4e539935.125df69ed78.-7ffd</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/node())</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fa5</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fff</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Dado Cadastral'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4155022511656800501--4e539935.125df69ed78.-7ffc</con2:id>
                  <con1:errCode>ESB-ATEND-0012</con1:errCode>
                  <con1:message>Dado Cadastral</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">(not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/nome/node()) or fn:data($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/nome) eq "") and
(not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/codigoSuframa/node()) or fn:data($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/codigoSuframa eq "")) and
(not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/node()))</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fa5</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fff</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Dado Cadastral'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4155022511656800501--4e539935.125df69ed78.-7ffb</con2:id>
                  <con1:errCode>ESB-ATEND-0012</con1:errCode>
                  <con1:message>Dado Cadastral</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">(not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/nome/node()) or fn:data($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/dadoCadastralTitular/nome) eq "") and
(not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/codigoSuframa/node()) or fn:data($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/dadoCadastralTitular/codigoSuframa eq "")) and





(not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/dataNascimento/node())) and

(not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/CPF/node()) or fn:data($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/CPF) eq "") and

(not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/RG/node()) or fn:data($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/RG) eq "") and

(not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/orgaoExpedidor/node()) or fn:data($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/orgaoExpedidor) eq "") and

not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/flagEstrangeiro/node()) and

(not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/nomePai/node()) or fn:data($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/nomePai) eq "") and

(not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/nomeMae/node()) or fn:data($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/nomeMae) eq "") and

not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/sexo/node()) and

not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/identificacaoEstadoCivil/node()) and

not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/identificacaoProfissao/node()) and

not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/identificacaoEscolaridade/node()) and

(not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/CNPJ/node()) or fn:data($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/CNPJ) eq "") and

not($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/InscricaoEstadual/node())</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fa5</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fff</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Dado Cadastral'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4155022511656800501--4e539935.125df69ed78.-7ffb</con2:id>
                  <con1:errCode>ESB-ATEND-0012</con1:errCode>
                  <con1:message>Dado Cadastral</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">not($body/con:parametrosAlterarDadoCadastralTitular/identificacaoContrato/node())</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fa5</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fff</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Identificação Contrato'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4155022511656800501--4e539935.125df69ed78.-7ffb</con2:id>
                  <con1:errCode>ESB-ATEND-0012</con1:errCode>
                  <con1:message>Identificação Contrato</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
      <con:stage name="Identificação do Contrato" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f40">
        <con:comment>Estágio que efetua chamada ao serviço
"TransformaIdentificacaoContrato12V1" 
para fazer a identificação do contrato 
informado.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="trans" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/><con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8209393703415118201-2b9b361e.125fe4949aa.-7fee</con2:id>
            <con1:service xsi:type="ref:ProxyRef" ref="general/NETSMSDatabaseConfig/proxyservice/TransformaIdentificacaoContrato12V1" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>transformaIdentificacaoContrato</con1:operation>
            <con1:request>
              <con1:body>$identificarContratoRequest</con1:body>
            </con1:request>
            <con1:response>
              <con1:body>localCallResponse</con1:body>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="identificarContratoRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7fff</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/AlterarDadoCadastralTitularIdentificarContratoXQuery"/>
                    <con2:param name="parametrosAlterarDadoCadastralTitular1">
                      <con2:path>$body/con:parametrosAlterarDadoCadastralTitular</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ffe</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$identificarContratoRequest</con3:xqueryText>
                </con2:expr>
                <con2:message>identificarContratoRequest</con2:message>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="identificarContratoResponse">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f47</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localCallResponse</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ffd</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$identificarContratoResponse</con3:xqueryText>
                </con2:expr>
                <con2:message>identificarContratoResponse</con2:message>
              </con2:log>
            <con1:transport-headers><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7827888599031603882-57a499ea.17f1dd7e987.-7ffc</con2:id><con1:header-set>inbound-response</con1:header-set><con1:header name="SOA-Base" value="expression"><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($identificarContratoResponse/trans:AliasDatabase)</con2:xqueryText></con1:header></con1:transport-headers></con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
      <con:stage name="Efetua a Consulta Dado Cadastral Titular" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f38">
        <con:comment>Estágio responsável por efetuar a chamada 
a operação consultarClientePorContrato do
proxy ClienteProspectDSLBSV1_0.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="tran" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/ClientePropesct/schemas" prefix="sch" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-2838014697274776184--57aaadb4.125e4d0cda5.-7ff9</con2:id>
            <con1:service xsi:type="ref:BusinessServiceRef" ref="relacionar/atendimento/clienteprospect/businessservice/ClienteProspectDSLBSV1_0" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>consultarClientePorContrato</con1:operation>
            <con1:request>
              <con1:body>$consultarClientePorContratoRequest</con1:body>
            </con1:request>
            <con1:response>
              <con1:body>localCallResponse</con1:body>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="consultarClientePorContratoRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ff2</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ConsultarClienteDadoCadastralRequestXQuery"/>
                    <con2:param name="identificacaoContratoResponse1">
                      <con2:path>$identificarContratoResponse</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con1:transport-headers copy-all="false">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4153836595675112583--68137224.122a7da6bdf.-7f68</con2:id>
                <con1:header-set>outbound-request</con1:header-set>
                <con1:header name="j_identity_base" value="expression">
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($identificarContratoResponse/tran:AliasDatabase)</con2:xqueryText>
                </con1:header>
              </con1:transport-headers>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ff4</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$consultarClientePorContratoRequest</con3:xqueryText>
                </con2:expr>
                <con2:message>Request consultarClientePorContrato</con2:message>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="consultarClientePorContratoResponse">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f39</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localCallResponse</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ff3</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$consultarClientePorContratoResponse/sch:ClientesProspect</con3:xqueryText>
                </con2:expr>
                <con2:message>Response consultarClientePorContrato</con2:message>
              </con2:log>
            </con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
      <con:stage name="Verifica se contrato existe" errorHandler="_onErrorHandler-6095354263032001506-51fecf5.127d967ba12.-7fef">
        <con:comment>Estágio responsável por verificar se foi encontrado 
um contrato para o identificador de contrato informado.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/ClientePropesct/schemas" prefix="sch" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7ff7</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:not($consultarClientePorContratoResponse/sch:ClientesProspect//node())</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                  <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7fd5</con3:id>
                  <con2:logLevel>debug</con2:logLevel>
                  <con2:message>Contrato nao encontrado</con2:message>
                </con2:log>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7ff2</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7ff1</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Efetua a Consulta Dado Cadastral Titular'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7ff0</con2:id>
                  <con1:errCode>ESB-ATEND-0017</con1:errCode>
                  <con1:message>Contrato não encontrado</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:default>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7fff</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:message>Contrato encontrado</con2:message>
              </con2:log>
            </con1:default>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
      <con:stage name="Verificação da entrada com o banco" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f25">
        <con:comment>Estágio responsável por verificar a igualdade dos 
dados cadastrados no banco de dados com 
os dados de entrada da operação.</con:comment>
        <con:context>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ClientePropesct/schemas" prefix="sch" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="ld:br/com/netservicos/atendimento/webservice/ClienteProspectJWS.ws" prefix="cli" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:assign varName="dadoCadastralTitularBase" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f4c</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ClienteProspectXAlterarDadoCadastralTitularXQuery"/>
                <con2:param name="consultarClientePorContratoResponse1">
                  <con2:path>$consultarClientePorContratoResponse</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f4b</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$dadoCadastralTitularBase</con2:xqueryText>
            </con1:expr>
            <con1:message>dadoCadastralTitularBase</con1:message>
          </con1:log>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f4a</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular</con2:xqueryText>
            </con1:expr>
            <con1:message>dadoContatoTitularBody</con1:message>
          </con1:log>
          <con1:assign varName="dadoCadastralTitularComTodosCampos" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f49</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/AlterarDadoCadastralTitularXCamposNulosXQuery"/>
                <con2:param name="dadoCadastralTitular1">
                  <con2:path>$body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular</con2:path>
                </con2:param>
                <con2:param name="consultarClientePorContratoResponse1">
                  <con2:path>$consultarClientePorContratoResponse</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="isEqual" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f48</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ValidarIgualdadeAlterarDadoCadastralTitularXQuery"/>
                <con2:param name="dadoCadastralTitular1">
                  <con2:path>$dadoCadastralTitularComTodosCampos</con2:path>
                </con2:param>
                <con2:param name="tipoPessoa">
                  <con2:path>data($consultarClientePorContratoResponse/sch:ClientesProspect/sch:clienteProspect/sch:tipoPessoa)</con2:path>
                </con2:param>
                <con2:param name="dadoCadastralTitular2">
                  <con2:path>$dadoCadastralTitularBase</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f47</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">not(fn:contains(fn:upper-case(fn:data($body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular/pessoa/@xsi:type)),
fn:upper-case(data($consultarClientePorContratoResponse/sch:ClientesProspect/sch:clienteProspect/sch:tipoPessoa))))</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7862862821673356410--4f00a2a4.125f91a986c.-7ff0</con2:id>
                  <con1:errCode>ESB-ATEND-0014</con1:errCode>
                  <con1:message>Não é possível inserir dados de pessoas físicas para pessoas jurídicas e vice-versa.</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">xs:boolean($isEqual)</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-129915237115333906-1542671.12603a6ba4f.-7fc4</con2:id>
                  <con1:errCode>ESB-ATEND-0013</con1:errCode>
                  <con1:message>Os dados informados para alteração são iguais aos dados já cadastrados e nenhuma alteração foi realizada</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:default/>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
      <con:stage name="Chamada ao Validar Dado Cadastral Titular do WLI" errorHandler="_onErrorHandler-5854555711374985687--65842b72.12637166383.-7ff0">
        <con:comment>Estágio responsável por efetuar a chamada 
a operação validarDadoCadastralTitular do 
business service "ContratoVendaJWSBSV1_0".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="net" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="tran" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-8000</con2:id>
            <con1:service xsi:type="ref:BusinessServiceRef" ref="relacionar/atendimento/contratovenda/businessservice/ContratoVendaJWSBSV1_0" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>validarDadoCadastralTitular</con1:operation>
            <con1:request>
              <con1:body wrapped="true">$validarDadoCadastralTitularRequestBody</con1:body>
              <con1:header>$validarDadoCadastralTitularRequestHeader</con1:header>
            </con1:request>
            <con1:response>
              <con1:body wrapped="true">validarDadoCadastralTitularResponseBody</con1:body>
              <con1:header>validarDadoCadastralTitularReponseHeader</con1:header>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="validarDadoCadastralRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7fff</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/AlterarDadoCadastralEmValidarDadoCadastralXQuery"/>
                    <con2:param name="dadoCadastralTitular1">
                      <con2:path>$body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular</con2:path>
                    </con2:param>
                    <con2:param name="consultarClientePorContratoResponse1">
                      <con2:path>$consultarClientePorContratoResponse</con2:path>
                    </con2:param>
                    <con2:param name="identificacaoContratoResponse1">
                      <con2:path>$identificarContratoResponse</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="validarDadoCadastralTitularRequestBody">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7ffe</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Body>
{$validarDadoCadastralRequest}
&lt;/soap12-env:Body></con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="validarDadoCadastralTitularRequestHeader">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7ffd</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Header>
	{$header/net:NetHeader}
&lt;/soap12-env:Header></con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:transport-headers copy-all="true">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4153836595675112583--68137224.122a7da6bdf.-7f68</con2:id>
                <con1:header-set>outbound-request</con1:header-set>
                <con1:header name="j_identity_base" value="expression">
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($identificarContratoResponse/tran:AliasDatabase)</con2:xqueryText>
                </con1:header>
                <con1:header name="Content-Type" value="expression">
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">"application/soap+xml;charset=UTF-8"</con2:xqueryText>
                </con1:header>
              </con1:transport-headers>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-129915237115333906-1542671.12603a6ba4f.-7fef</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$validarDadoCadastralTitularRequestBody</con3:xqueryText>
                </con2:expr>
                <con2:message>Request body validarDadoCadastral</con2:message>
              </con2:log>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7ff4</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$validarDadoCadastralTitularRequestHeader</con3:xqueryText>
                </con2:expr>
                <con2:message>Request Header validarDadoCadastralTitular</con2:message>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="localCallResponse">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f1d</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validarDadoCadastralTitularResponseBody</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-129915237115333906-1542671.12603a6ba4f.-7fef</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$validarDadoCadastralTitularResponseBody</con3:xqueryText>
                </con2:expr>
                <con2:message>Response body validarDadoCadastralResponse</con2:message>
              </con2:log>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7ff3</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$validarDadoCadastralTitularResponseHeader</con3:xqueryText>
                </con2:expr>
                <con2:message>Response Header validarDadoCadastralTitular</con2:message>
              </con2:log>
            </con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
      <con:stage name="Chamada ao Alterar Dado Cadastral Titular do WLI" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f1e">
        <con:comment>Estágio responsável por efetuar a chamada 
a operação alterarDadoCadastralTitular do 
business service "ContratoVendaJWSBSV1_0".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="tran" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="net" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-129915237115333906-1542671.12603a6ba4f.-7ff1</con2:id>
            <con1:service xsi:type="ref:BusinessServiceRef" ref="relacionar/atendimento/contratovenda/businessservice/ContratoVendaJWSBSV1_0" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>alterarDadoCadastralTitular</con1:operation>
            <con1:request>
              <con1:body wrapped="true">$alterarDadoCadastralTitularRequestBody</con1:body>
              <con1:header>$alterarDadoCadastralTitularRequestHeader</con1:header>
            </con1:request>
            <con1:response>
              <con1:body wrapped="true">localCallResponse</con1:body>
              <con1:header>alterarDadoCadastralTitularResponseHeader</con1:header>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="alterarDadoCadastralTitularRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-129915237115333906-1542671.12603a6ba4f.-7ff0</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/AlterarDadoCadastralTitularXAlterarWLIXQuery"/>
                    <con2:param name="registroContato1">
                      <con2:path>$body/con:parametrosAlterarDadoCadastralTitular/registroContato</con2:path>
                    </con2:param>
                    <con2:param name="dadoCadastralTitular1">
                      <con2:path>$body/con:parametrosAlterarDadoCadastralTitular/dadoCadastralTitular</con2:path>
                    </con2:param>
                    <con2:param name="consultarClientePorContratoResponse1">
                      <con2:path>$consultarClientePorContratoResponse</con2:path>
                    </con2:param>
                    <con2:param name="identificacaoContratoResponse1">
                      <con2:path>$identificarContratoResponse</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="alterarDadoCadastralTitularRequestBody">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7ff1</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Body>
{$alterarDadoCadastralTitularRequest}
&lt;/soap12-env:Body></con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="alterarDadoCadastralTitularRequestHeader">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7ff2</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Header>
	{$header/net:NetHeader}
&lt;/soap12-env:Header></con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:transport-headers copy-all="true">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4153836595675112583--68137224.122a7da6bdf.-7f68</con2:id>
                <con1:header-set>outbound-request</con1:header-set>
                <con1:header name="j_identity_base" value="expression">
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($identificarContratoResponse/tran:AliasDatabase)</con2:xqueryText>
                </con1:header>
                <con1:header name="Content-Type" value="expression">
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">"application/soap+xml;charset=UTF-8"</con2:xqueryText>
                </con1:header>
              </con1:transport-headers>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-129915237115333906-1542671.12603a6ba4f.-7fef</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$alterarDadoCadastralTitularRequestBody</con3:xqueryText>
                </con2:expr>
                <con2:message>Request body alterarDadoCadastral</con2:message>
              </con2:log>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7ff4</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$alterarDadoCadastralTitularRequestHeader</con3:xqueryText>
                </con2:expr>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="alterarDadoCadastralTitularResponseBody">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f1d</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localCallResponse</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-129915237115333906-1542671.12603a6ba4f.-7fef</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$alterarDadoCadastralTitularResponseBody</con3:xqueryText>
                </con2:expr>
                <con2:message>alterarDadoCadastralResponse</con2:message>
              </con2:log>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7ff3</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$alterarDadoCadastralTitularResponseHeader</con3:xqueryText>
                </con2:expr>
                <con2:message>Response Header alterarDadoCadastralTitular</con2:message>
              </con2:log>
            </con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
      <con:stage name="Estágio Integração Parceiro Negócio" errorHandler="_onErrorHandler-1365298233829760588--1355c916.134a3ebc4f7.-7ff9">
        <con:comment>Realiza integração com parceiro Embratel
com envio de hits quando a alteração de 
dados cadastrais resulta em 
geração de hit "AL".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="tran" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="net" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/identificacaoContrato" prefix="iden" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1365298233829760588--1355c916.134a3ebc4f7.-7fee</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:message>Executando a integração com o parceiro de negocio</con1:message>
          </con1:log>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1365298233829760588--1355c916.134a3ebc4f7.-7fff</con2:id>
            <con1:service xsi:type="ref:BusinessServiceRef" ref="ativar/aprovisionamento/parceiro/businessservice/BuscarHitBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>buscarVOIPHitALDadosCadastraisPND</con1:operation>
            <con1:request>
              <con1:body>$buscarVOIPHitALDadosCadastraisPNDResquest</con1:body>
            </con1:request>
            <con1:response>
              <con1:body>buscarVOIPHitALDadosCadastraisPNDResponse</con1:body>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="buscarVOIPHitALDadosCadastraisPNDResquest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1365298233829760588--1355c916.134a3ebc4f7.-7ffe</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/BuscarHitDadosCadastraisPNDXQuery"/>
                    <con2:param name="numeroContrato">
                      <con2:path>data($body/con:parametrosAlterarDadoCadastralTitular/identificacaoContrato/iden:Contrato/iden:NumeroContrato)</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-1365298233829760588--1355c916.134a3ebc4f7.-7ffc</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$buscarVOIPHitALDadosCadastraisPNDResquest</con3:xqueryText>
                </con2:expr>
                <con2:message>buscarVOIPHitALDadosCadastraisPNDResquest</con2:message>
              </con2:log>
              <con1:transport-headers copy-all="true">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1365298233829760588--1355c916.134a3ebc4f7.-7ffb</con2:id>
                <con1:header-set>outbound-request</con1:header-set>
                <con1:header name="j_identity_base" value="expression">
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($identificarContratoResponse/tran:AliasDatabase)</con2:xqueryText>
                </con1:header>
              </con1:transport-headers>
            </con1:requestTransform>
            <con1:responseTransform>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-1365298233829760588--1355c916.134a3ebc4f7.-7ffa</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$buscarVOIPHitALDadosCadastraisPNDResponse</con3:xqueryText>
                </con2:expr>
                <con2:message>buscarVOIPHitALDadosCadastraisPNDResponse Resposta consulta registros AL</con2:message>
              </con2:log>
            </con1:responseTransform>
          </con1:wsCallout>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-163011834384545255--73aa5eb8.134b2e05eb6.-7ff2</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body</con2:xqueryText>
            </con1:expr>
            <con1:message>BODY A SER TRANFORMADO</con1:message>
          </con1:log>
          <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-163011834384545255--73aa5eb8.134b2e05eb6.-7ffc</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">not (fn:empty($buscarVOIPHitALDadosCadastraisPNDResponse))</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:wsCallout>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-163011834384545255--73aa5eb8.134b2e05eb6.-7ff9</con2:id>
                  <con1:service xsi:type="ref:ProxyRef" ref="relacionar/cliente/parceiro/proxyservice/InformarAlteracaoDadosCadastrais12" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
                  <con1:operation>informarAlteracaoDadosCadastrais</con1:operation>
                  <con1:request>
                    <con1:body>$informarAlteracaoDadosCadastraisRequest</con1:body>
                    <con1:header>$informarAlteracaoDadosCadastraisRequestHeader</con1:header>
                  </con1:request>
                  <con1:response>
                    <con1:body>informarAlteracaoDadosCadastraisResponse</con1:body>
                    <con1:header>informarAlteracaoDadosCadastraisResponseHeader</con1:header>
                  </con1:response>
                  <con1:requestTransform>
                    <con1:assign varName="informarAlteracaoDadosCadastraisRequest">
                      <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-163011834384545255--73aa5eb8.134b2e05eb6.-7ff8</con2:id>
                      <con1:expr>
                        <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                          <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/InformarAlteracaoDadosCadastraisServicoXQuery"/>
                          <con2:param name="parametrosAlterarDadoCadastralTitular1">
                            <con2:path>$body/con:parametrosAlterarDadoCadastralTitular</con2:path>
                          </con2:param>
                        </con2:xqueryTransform>
                      </con1:expr>
                    </con1:assign>
                    <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                      <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-163011834384545255--73aa5eb8.134b2e05eb6.-7ff7</con3:id>
                      <con2:logLevel>debug</con2:logLevel>
                      <con2:expr>
                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$informarAlteracaoDadosCadastraisRequest</con3:xqueryText>
                      </con2:expr>
                      <con2:message>informarAlteracaoDadosCadastraisRequest</con2:message>
                    </con2:log>
                    <con1:assign varName="informarAlteracaoDadosCadastraisRequestHeader">
                      <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-163011834384545255--73aa5eb8.134b2e05eb6.-7ff0</con2:id>
                      <con1:expr>
                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<soap12-env:Header>
  <netheader:NetHeader xmlns:netheader="http://www.netservicos.com.br/NetHeader">
    <aplicacao>{data($header/net:NetHeader/aplicacao)}</aplicacao>
    <funcionalidade>{data($header/net:NetHeader/funcionalidade)}</funcionalidade>
    <versaoServico>{data($header/net:NetHeader/versaoServico)}</versaoServico>
    <token>{data($header/net:NetHeader/token)}</token>
    <atendimento>
      <numeroProtocolo>{data($header/net:NetHeader/atendimento/numeroProtocolo)}</numeroProtocolo>
      <numeroChamada>{data($header/net:NetHeader/atendimento/numeroChamada)}</numeroChamada>
    </atendimento>
    <username>{data($header/net:NetHeader/username)}</username>
  </netheader:NetHeader>
</soap12-env:Header>]]></con2:xqueryText>
                      </con1:expr>
                    </con1:assign>
                    <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                      <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-163011834384545255--73aa5eb8.134b2e05eb6.-7fee</con3:id>
                      <con2:logLevel>debug</con2:logLevel>
                      <con2:expr>
                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$informarAlteracaoDadosCadastraisRequestHeader</con3:xqueryText>
                      </con2:expr>
                      <con2:message>informarAlteracaoDadosCadastraisRequestHeader</con2:message>
                    </con2:log>
                    <con1:transport-headers>
                      <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-163011834384545255--73aa5eb8.134b2e05eb6.-7ff5</con2:id>
                      <con1:header-set>outbound-request</con1:header-set>
                      <con1:header name="j_identity_base" value="expression">
                        <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($identificarContratoResponse/tran:AliasDatabase)</con2:xqueryText>
                      </con1:header>
                    </con1:transport-headers>
                  </con1:requestTransform>
                  <con1:responseTransform>
                    <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                      <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-163011834384545255--73aa5eb8.134b2e05eb6.-7ff3</con3:id>
                      <con2:logLevel>debug</con2:logLevel>
                      <con2:expr>
                        <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$informarAlteracaoDadosCadastraisResponse</con3:xqueryText>
                      </con2:expr>
                      <con2:message>informarAlteracaoDadosCadastraisResponse</con2:message>
                    </con2:log>
                  </con1:responseTransform>
                </con1:wsCallout>
              </con1:actions>
            </con1:case>
            <con1:default>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-163011834384545255--73aa5eb8.134b2e05eb6.-7ffb</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:message>Nenhum Registro AL para Integração com Parceiro encontrado.</con2:message>
              </con2:log>
            </con1:default>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
      <con:stage name="Insere Registro Auditoria" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7e6f">
        <con:comment>Estágio responsável por inserir uma mensagem 
de alteração de dado cadastral titular na fila 
de auditoria.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="tran" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/ClientePropesct/schemas" prefix="ns1" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="net" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:variable name="netheader" path="$netheader" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
            <con1:schema ref="modelocanonicoV2/geral/NETHeader" element="NetHeader"/>
          </con1:variable>
        </con:context>
        <con:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fdd</con2:id>
            <con1:service xsi:type="ref:BusinessServiceRef" ref="general/auditoria/businessservice/AuditoriaQueueBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:request>
              <con1:payload>$auditoriaQueueRequest</con1:payload>
            </con1:request>
            <con1:response>
              <con1:payload>auditoriaQueueResponse</con1:payload>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="auditoriaQueueRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fdc</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/AlterarDadoCadastralTitularXInsereRegistroQueueXQuery"/>
                    <con2:param name="idRegistro">
                      <con2:path>xs:string(fn:data($consultarClientePorContratoResponse/ns1:ClientesProspect/ns1:clienteProspect[1]/ns1:Identificador))</con2:path>
                    </con2:param>
                    <con2:param name="nota">
                      <con2:path>fn:concat("ALTERAÇÃO DADO CADASTRAL TITULAR", " ", "Identificador Assinante: ", fn:data($consultarClientePorContratoResponse/ns1:ClientesProspect/ns1:clienteProspect[1]/ns1:Identificador), " ", "Número Contrato: ", fn:data($identificarContratoResponse/tran:Contrato/tran:NumeroContrato), " ", "Identificador Cidade: ", fn:data($identificarContratoResponse/tran:Contrato/tran:IdentificacaoCidade))</con2:path>
                    </con2:param>
                    <con2:param name="usuario">
                      <con2:path>fn:data($inbound/ctx:security/ctx:transportClient/ctx:username)</con2:path>
                    </con2:param>
                    <con2:param name="campo">
                      <con2:path>"SN_ASSINANTE.ID_ASSINANTE"</con2:path>
                    </con2:param>
                    <con2:param name="idAcao">
                      <con2:path>xs:integer(4001)</con2:path>
                    </con2:param>
                    <con2:param name="sistema">
                      <con2:path>fn-bea:if-then-else($header/net:NetHeader/aplicacao eq "", "NÃO INFORMADO",fn:data($header/net:NetHeader/aplicacao))</con2:path>
                    </con2:param>
                    <con2:param name="cidade">
                      <con2:path>fn:data($identificarContratoResponse/tran:Contrato/tran:IdentificacaoCidade)</con2:path>
                    </con2:param>
                    <con2:param name="criticidade">
                      <con2:path>xs:integer(1)</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fdb</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$auditoriaQueueRequest</con3:xqueryText>
                </con2:expr>
                <con2:message>Request auditoriaQueue</con2:message>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="localCallResponse">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7fb9</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$auditoriaQueueResponse</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fda</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$auditoriaQueueResponse</con3:xqueryText>
                </con2:expr>
                <con2:message>Response auditoriaQueue</con2:message>
              </con2:log>
            </con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="response" name="Operação Alterar Dado Cadastral Titular_response" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Retorno ao Cliente">
        <con:comment>Efetua o tratamento do retorno antes de ser enviado
ao cliente.</con:comment>
        <con:context/>
        <con:actions>
          <con1:replace varName="body" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fc4</con2:id>
            <con1:location>
              <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText>
            </con1:location>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Body>
	&lt;con:resultadoAlterarDadoCadastralTitular xmlns:con="http://www.netservicos.com.br/ContratoVendaV2/"/>
&lt;/soap12-env:Body></con2:xqueryText>
            </con1:expr>
          </con1:replace>
          <con1:replace varName="header" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3602396152036100354--4b147286.1242f8a876a.-7ff8</con2:id>
            <con1:location>
              <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText>
            </con1:location>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Header/></con2:xqueryText>
            </con1:expr>
          </con1:replace>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="request" name="Operação Default_request" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Trata NETHeader">
        <con:comment>Estágio onde é efetuado o tratamento do NetHeader.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="netheader" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:replace varName="header" contents-only="true" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4191636047790565318--425b84ee.1263e06c433.-7ff3</con2:id>
            <con1:location>
              <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText>
            </con1:location>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/transformation/TransformarNetHeaderDefaults"/>
                <con2:param name="tokenDefault">
                  <con2:path>fn-bea:uuid()</con2:path>
                </con2:param>
                <con2:param name="netHeaderIN">
                  <con2:path>$header//netheader:NetHeader</con2:path>
                </con2:param>
                <con2:param name="numeroProtocoloDefault">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="aplicacaoDefault">
                  <con2:path>'OTHER'</con2:path>
                </con2:param>
                <con2:param name="funcionalidadeDefault">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="versaoServicoDefault">
                  <con2:path>'2.0'</con2:path>
                </con2:param>
                <con2:param name="usernameDefault">
                  <con2:path>fn:data($inbound/ctx:security/ctx:transportClient/ctx:username)</con2:path>
                </con2:param>
                <con2:param name="numeroChamadaDefault">
                  <con2:path>''</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:replace>
        </con:actions>
      </con:stage>
      <con:stage name="Estágio Lança Exceção" errorHandler="_onErrorHandler-4191636047790565318--425b84ee.1263e06c433.-7ffa">
        <con:comment>Efetua o lançamento da exceção informando que a
operação solicitada é inválida.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fa5</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fff</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-129915237115333906-1542671.12603a6ba4f.-7ffa</con2:id>
            <con1:errCode>ESB-ATEND-0002</con1:errCode>
            <con1:message>A operação solicitada para o serviço não é válida.</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="response" name="Operação Default_response" xmlns:con="http://www.bea.com/wli/sb/pipeline/config"/>
    <con:pipeline type="request" name="Operação Validar Dado Contato Titular_request" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Trata NETHeader">
        <con:comment>Estágio onde é efetuado o tratamento do NetHeader.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="netheader" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:replace varName="header" contents-only="true" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7887230296732919649-125cf5c7.1262d1d196c.-7fff</con2:id>
            <con1:location>
              <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText>
            </con1:location>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/transformation/TransformarNetHeaderDefaults"/>
                <con2:param name="tokenDefault">
                  <con2:path>fn-bea:uuid()</con2:path>
                </con2:param>
                <con2:param name="netHeaderIN">
                  <con2:path>$header//netheader:NetHeader</con2:path>
                </con2:param>
                <con2:param name="numeroProtocoloDefault">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="aplicacaoDefault">
                  <con2:path>'OTHER'</con2:path>
                </con2:param>
                <con2:param name="funcionalidadeDefault">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="versaoServicoDefault">
                  <con2:path>'2.0'</con2:path>
                </con2:param>
                <con2:param name="usernameDefault">
                  <con2:path>fn:data($inbound/ctx:security/ctx:transportClient/ctx:username)</con2:path>
                </con2:param>
                <con2:param name="numeroChamadaDefault">
                  <con2:path>''</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:replace>
        </con:actions>
      </con:stage>
      <con:stage name="Valida dados de entrada" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f06">
        <con:comment>Estágio responsável por fazer a verificação 
de preenchimento dos campos obrigatórios 
exigidos pela operação.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fc8</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body</con2:xqueryText>
            </con1:expr>
            <con1:message>Dados de entrada Validar Dado Contado</con1:message>
          </con1:log>
          <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7ff9</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">not($body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/node())</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fa5</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fff</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Dado Contato'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f8a</con2:id>
                  <con1:errCode>ESB-ATEND-0012</con1:errCode>
                  <con1:message>Dado Contato</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/node() and

not($body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/node()) and
not($body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/email/node())</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fa5</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fff</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Dado Cadastral'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f8a</con2:id>
                  <con1:errCode>ESB-ATEND-0012</con1:errCode>
                  <con1:message>Dado Contato</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">not($body/con:parametrosValidarDadoContatoTitular/identificacaoContrato/node())</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fa5</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fff</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Identificação Contrato'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f8a</con2:id>
                  <con1:errCode>ESB-ATEND-0012</con1:errCode>
                  <con1:message>Identificação Contrato</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">not($body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[1]/dddTelefone/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[1]/numeroTelefone/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[1]/ramal/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[1]/tipoTelefone/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[2]/dddTelefone/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[2]/numeroTelefone/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[2]/ramal/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[2]/tipoTelefone/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[3]/dddTelefone/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[3]/numeroTelefone/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[3]/ramal/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[3]/tipoTelefone/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[4]/dddTelefone/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[4]/numeroTelefone/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[4]/ramal/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[4]/tipoTelefone/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[5]/dddTelefone/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[5]/numeroTelefone/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[5]/ramal/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/telefones/telefone[5]/tipoTelefone/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/email/enderecoEmail/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/email/tipoEmail/node()
or $body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular/email/aceitaContato/node())</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fa5</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fff</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Dado Contato'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f8a</con2:id>
                  <con1:errCode>ESB-ATEND-0012</con1:errCode>
                  <con1:message>Dado Contato</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
      <con:stage name="Identificação Contrato" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7efa">
        <con:comment>Estágio que efetua chamada ao serviço
"TransformaIdentificacaoContrato12V1" 
para fazer a identificação do contrato 
informado.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="trans" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/><con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8209393703415118201-2b9b361e.125fe4949aa.-7fee</con2:id>
            <con1:service xsi:type="ref:ProxyRef" ref="general/NETSMSDatabaseConfig/proxyservice/TransformaIdentificacaoContrato12V1" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>transformaIdentificacaoContrato</con1:operation>
            <con1:request>
              <con1:body>$identificarContratoRequest</con1:body>
            </con1:request>
            <con1:response>
              <con1:body>localCallResponse</con1:body>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="identificarContratoRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7fff</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ValidarDadosContatoIdentificaContratoXQuery"/>
                    <con2:param name="parametrosValidarDadoContatoTitular1">
                      <con2:path>$body/con:parametrosValidarDadoContatoTitular</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ffe</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$identificarContratoRequest</con3:xqueryText>
                </con2:expr>
                <con2:message>identificarContratoRequest</con2:message>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="identificarContratoResponse">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f01</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localCallResponse</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ffd</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$identificarContratoResponse</con3:xqueryText>
                </con2:expr>
                <con2:message>identificarContratoResponse</con2:message>
              </con2:log>
            <con1:transport-headers><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7827888599031603882-57a499ea.17f1dd7e987.-7ffa</con2:id><con1:header-set>inbound-response</con1:header-set><con1:header name="SOA-Base" value="expression"><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($identificarContratoResponse/trans:AliasDatabase)</con2:xqueryText></con1:header></con1:transport-headers></con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
      <con:stage name="Efetua a Consulta Dado Cadastral Titular" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7eec">
        <con:comment>Estágio responsável por efetuar a chamada 
a operação consultarClientePorContrato do
proxy ClienteProspectDSLBSV1_0.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="tran" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-129915237115333906-1542671.12603a6ba4f.-7fd3</con2:id>
            <con1:service xsi:type="ref:BusinessServiceRef" ref="relacionar/atendimento/clienteprospect/businessservice/ClienteProspectDSLBSV1_0" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>consultarClientePorContrato</con1:operation>
            <con1:request>
              <con1:body>$consultaDadoCadastralTitularRequest</con1:body>
            </con1:request>
            <con1:response>
              <con1:body>localCallResponse</con1:body>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="consultaDadoCadastralTitularRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ff2</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ConsultarClienteDadoCadastralRequestXQuery"/>
                    <con2:param name="identificacaoContratoResponse1">
                      <con2:path>$identificarContratoResponse</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con1:transport-headers copy-all="false">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4153836595675112583--68137224.122a7da6bdf.-7f68</con2:id>
                <con1:header-set>outbound-request</con1:header-set>
                <con1:header name="j_identity_base" value="expression">
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($identificarContratoResponse/tran:AliasDatabase)</con2:xqueryText>
                </con1:header>
              </con1:transport-headers>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ff4</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$consultaDadoCadastralTitularRequest</con3:xqueryText>
                </con2:expr>
                <con2:message>consultaDadoCadastralTitularRequest</con2:message>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="consultaDadoCadastralTitularResponse">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ef3</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localCallResponse</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ff3</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$consultaDadoCadastralTitularResponse</con3:xqueryText>
                </con2:expr>
                <con2:message>consultaDadoCadastralTitularResponse</con2:message>
              </con2:log>
            </con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
      <con:stage name="Verifica se contrato existe" errorHandler="_onErrorHandler-6095354263032001506-51fecf5.127d967ba12.-7ffe">
        <con:comment>Estágio responsável por verificar se foi encontrado 
um contrato para o identificador de contrato informado.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/ClientePropesct/schemas" prefix="sch" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-8000</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:not($consultaDadoCadastralTitularResponse/sch:ClientesProspect//node())</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                  <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7ffd</con3:id>
                  <con2:logLevel>debug</con2:logLevel>
                  <con2:message>Contrato nao encontrado</con2:message>
                </con2:log>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7ffc</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7ffb</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Efetua a Consulta Dado Cadastral Titular'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7ffa</con2:id>
                  <con1:errCode>ESB-ATEND-0017</con1:errCode>
                  <con1:message>Contrato não encontrado</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:default>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7fff</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:message>Contrato encontrado</con2:message>
              </con2:log>
            </con1:default>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
      <con:stage name="Valida Igualdade dos dados de Contato com a Base" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7edf">
        <con:comment>Estágio responsável por verificar a igualdade dos 
dados cadastrados no banco de dados com 
os dados de entrada da operação.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/ClienteProspect/schemas" prefix="sch" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f2b</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body</con2:xqueryText>
            </con1:expr>
            <con1:message>Dados de Entrada</con1:message>
          </con1:log>
          <con1:assign varName="validarDadoContatoBody" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f2c</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ValidarDadoContatoTitularEntradaXCamposNulosXQuery"/>
                <con2:param name="dadoContatoTitular1">
                  <con2:path>$body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f29</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$consultaDadoCadastralTitularResponse</con2:xqueryText>
            </con1:expr>
            <con1:message>Dados da base</con1:message>
          </con1:log>
          <con1:assign varName="validarDadoContatoBase" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f28</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ValidarDadoContatoTitularBaseXCamposNulosXQuery"/>
                <con2:param name="consultarClientePorContratoResponse1">
                  <con2:path>$consultaDadoCadastralTitularResponse</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="isEqual" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f27</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ValidarIgualdadeValidarDadoContatoTitularXQuery"/>
                <con2:param name="dadoContatoTitular1">
                  <con2:path>$validarDadoContatoBody</con2:path>
                </con2:param>
                <con2:param name="dadoContatoTitular2">
                  <con2:path>$validarDadoContatoBase</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7862862821673356410--4f00a2a4.125f91a986c.-7ff1</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">xs:boolean($isEqual)</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-129915237115333906-1542671.12603a6ba4f.-7fc4</con2:id>
                  <con1:errCode>ESB-ATEND-0013</con1:errCode>
                  <con1:message>Nenhuma alteração foi realizada.</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
      <con:stage name="Chamada ao Validar Dado Contato Titular do WLI" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7ed2">
        <con:comment>Estágio responsável por efetuar a chamada 
a operação validarDadoContatoTitular do 
business service "ContratoVendaJWSBSV1_0".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="tran" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="net" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-129915237115333906-1542671.12603a6ba4f.-7fc9</con2:id>
            <con1:service xsi:type="ref:BusinessServiceRef" ref="relacionar/atendimento/contratovenda/businessservice/ContratoVendaJWSBSV1_0" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>validarDadoContatoTitular</con1:operation>
            <con1:request>
              <con1:body wrapped="true">$validarDadoContatoTitularRequestBody</con1:body>
              <con1:header>$validarDadoContatoTitularRequestHeader</con1:header>
            </con1:request>
            <con1:response>
              <con1:body wrapped="true">localCallResponse</con1:body>
              <con1:header>validarDadoContatoTitularResponseHeader</con1:header>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="validarDadoContatoTitularRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8209393703415118201-2b9b361e.125fe4949aa.-7fdf</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ValidarDadoContatoTitularXValidarContatoWLIXQuery"/>
                    <con2:param name="dadoContatoTitular1">
                      <con2:path>$body/con:parametrosValidarDadoContatoTitular/dadoContatoTitular</con2:path>
                    </con2:param>
                    <con2:param name="identificacaoContratoResponse1">
                      <con2:path>$identificarContratoResponse</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="validarDadoContatoTitularRequestBody">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7feb</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Body>
{$validarDadoContatoTitularRequest}
&lt;/soap12-env:Body></con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="validarDadoContatoTitularRequestHeader">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fea</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Header>
	{$header/net:NetHeader}
&lt;/soap12-env:Header></con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:transport-headers>
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8209393703415118201-2b9b361e.125fe4949aa.-7fdb</con2:id>
                <con1:header-set>outbound-request</con1:header-set>
                <con1:header name="j_identity_base" value="expression">
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($identificarContratoResponse/tran:AliasDatabase)</con2:xqueryText>
                </con1:header>
              </con1:transport-headers>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8209393703415118201-2b9b361e.125fe4949aa.-7fde</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$validarDadoContatoTitularRequestBody</con3:xqueryText>
                </con2:expr>
                <con2:message>Request Body validarDadoContatoTitular</con2:message>
              </con2:log>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fe9</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$validarDadoContatoTitularRequestHeader</con3:xqueryText>
                </con2:expr>
                <con2:message>Response Header validarDadoContatoTitular</con2:message>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="validarDadoContatoTitularResponseBody">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ecb</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localCallResponse</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8209393703415118201-2b9b361e.125fe4949aa.-7fde</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$validarDadoContatoTitularResponseBody</con3:xqueryText>
                </con2:expr>
                <con2:message>Response Body validarDadoContatoTitular</con2:message>
              </con2:log>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fe8</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$validarDadoContatoTitularResponseHeader</con3:xqueryText>
                </con2:expr>
                <con2:message>Response Header validarDadoContatoTitular</con2:message>
              </con2:log>
            </con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="response" name="Operação Validar Dado Contato Titular_response" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Retorno ao Cliente">
        <con:comment>Efetua o tratamento do retorno antes de ser enviado
ao cliente.</con:comment>
        <con:context/>
        <con:actions>
          <con1:replace varName="body" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fc2</con2:id>
            <con1:location>
              <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText>
            </con1:location>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Body>
	&lt;con:resultadoValidarDadoContatoTitular xmlns:con="http://www.netservicos.com.br/ContratoVendaV2/"/>
&lt;/soap12-env:Body></con2:xqueryText>
            </con1:expr>
          </con1:replace>
          <con1:replace varName="header" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3602396152036100354--4b147286.1242f8a876a.-7ff8</con2:id>
            <con1:location>
              <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText>
            </con1:location>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Header/></con2:xqueryText>
            </con1:expr>
          </con1:replace>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="request" name="Operação Alterar Dado Contato Titular_request" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Trata NETHeader">
        <con:comment>Estágio onde é efetuado o tratamento do NetHeader.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="netheader" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:replace varName="header" contents-only="true" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7887230296732919649-125cf5c7.1262d1d196c.-7fff</con2:id>
            <con1:location>
              <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText>
            </con1:location>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/transformation/TransformarNetHeaderDefaults"/>
                <con2:param name="tokenDefault">
                  <con2:path>fn-bea:uuid()</con2:path>
                </con2:param>
                <con2:param name="netHeaderIN">
                  <con2:path>$header//netheader:NetHeader</con2:path>
                </con2:param>
                <con2:param name="numeroProtocoloDefault">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="aplicacaoDefault">
                  <con2:path>'OTHER'</con2:path>
                </con2:param>
                <con2:param name="funcionalidadeDefault">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="versaoServicoDefault">
                  <con2:path>'2.0'</con2:path>
                </con2:param>
                <con2:param name="usernameDefault">
                  <con2:path>fn:data($inbound/ctx:security/ctx:transportClient/ctx:username)</con2:path>
                </con2:param>
                <con2:param name="numeroChamadaDefault">
                  <con2:path>''</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:replace>
        </con:actions>
      </con:stage>
      <con:stage name="Validar dados de entrada" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7ec0">
        <con:comment>Estágio responsável por fazer a verificação 
de preenchimento dos campos obrigatórios 
exigidos pela operação.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/identificacaoContrato" prefix="iden" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fc7</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body</con2:xqueryText>
            </con1:expr>
            <con1:message>Dados de Entrada Alterar Dado Contato</con1:message>
          </con1:log>
          <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f26</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">not($body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/node())</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fa5</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fff</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Dado Contato'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f8a</con2:id>
                  <con1:errCode>ESB-ATEND-0012</con1:errCode>
                  <con1:message>Dado Contato</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">not($body/con:parametrosAlterarDadoContatoTitular/identificacaoContrato/node())</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fa5</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fff</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Indentificação Contrato'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f8a</con2:id>
                  <con1:errCode>ESB-ATEND-0012</con1:errCode>
                  <con1:message>Indentificação Contrato</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/node() and
not($body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/node()) and
not($body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/email/node())</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fa5</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fff</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Dado Contato'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f8a</con2:id>
                  <con1:errCode>ESB-ATEND-0012</con1:errCode>
                  <con1:message>Dado Contato</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">not($body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[1]/dddTelefone/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[1]/numeroTelefone/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[1]/ramal/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[1]/tipoTelefone/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[2]/dddTelefone/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[2]/numeroTelefone/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[2]/ramal/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[2]/tipoTelefone/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[3]/dddTelefone/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[3]/numeroTelefone/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[3]/ramal/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[3]/tipoTelefone/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[4]/dddTelefone/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[4]/numeroTelefone/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[4]/ramal/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[4]/tipoTelefone/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[5]/dddTelefone/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[5]/numeroTelefone/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[5]/ramal/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/telefones/telefone[5]/tipoTelefone/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/email/enderecoEmail/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/email/tipoEmail/node()
or $body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular/email/aceitaContato/node())</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fa5</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fff</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Dado Contato'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f8a</con2:id>
                  <con1:errCode>ESB-ATEND-0012</con1:errCode>
                  <con1:message>Dado Contato</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
      <con:stage name="Identificação Contrato" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7eb5">
        <con:comment>Estágio que efetua chamada ao serviço
"TransformaIdentificacaoContrato12V1" 
para fazer a identificação do contrato 
informado.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="trans" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/><con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8209393703415118201-2b9b361e.125fe4949aa.-7fee</con2:id>
            <con1:service xsi:type="ref:ProxyRef" ref="general/NETSMSDatabaseConfig/proxyservice/TransformaIdentificacaoContrato12V1" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>transformaIdentificacaoContrato</con1:operation>
            <con1:request>
              <con1:body>$identificarContratoRequest</con1:body>
            </con1:request>
            <con1:response>
              <con1:body>localCallResponse</con1:body>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="identificarContratoRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7fff</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/AlterarDadoContatoTitularXIdentificaContratoXQeury"/>
                    <con2:param name="parametrosAlterarDadoContatoTitular1">
                      <con2:path>$body/con:parametrosAlterarDadoContatoTitular</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ffe</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$identificarContratoRequest</con3:xqueryText>
                </con2:expr>
                <con2:message>identificarContratoRequest</con2:message>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="identificarContratoResponse">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7eae</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localCallResponse</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ffd</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$identificarContratoResponse</con3:xqueryText>
                </con2:expr>
                <con2:message>identificarContratoResponse</con2:message>
              </con2:log>
            <con1:transport-headers><con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7827888599031603882-57a499ea.17f1dd7e987.-7ff8</con2:id><con1:header-set>inbound-response</con1:header-set><con1:header name="SOA-Base" value="expression"><con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($identificarContratoResponse/trans:AliasDatabase)</con2:xqueryText></con1:header></con1:transport-headers></con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
      <con:stage name="Efetua a Consulta Dado Cadastral Titular" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7ea6">
        <con:comment>Estágio responsável por efetuar a chamada 
a operação consultarClientePorContrato do
proxy ClienteProspectDSLBSV1_0.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="tran" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ClientePropesct/schemas" prefix="sch" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="ld:br/com/netservicos/atendimento/webservice/ClienteProspectJWS.ws" prefix="cli" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:variable name="$label" path="$path" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
            <con1:wsdl ref="relacionar/atendimento/clienteprospect/wsdl/business/ClienteProspectDSLBSWSDLV1_0" element="cli:consultarClientePorContratoResponse" xmlns:cli="ld:br/com/netservicos/atendimento/webservice/ClienteProspectJWS.ws"/>
          </con1:variable>
        </con:context>
        <con:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-129915237115333906-1542671.12603a6ba4f.-7fd3</con2:id>
            <con1:service xsi:type="ref:BusinessServiceRef" ref="relacionar/atendimento/clienteprospect/businessservice/ClienteProspectDSLBSV1_0" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>consultarClientePorContrato</con1:operation>
            <con1:request>
              <con1:body>$consultaDadoCadastralTitularRequest</con1:body>
            </con1:request>
            <con1:response>
              <con1:body>localCallResponse</con1:body>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="consultaDadoCadastralTitularRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ff2</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ConsultarClienteDadoCadastralRequestXQuery"/>
                    <con2:param name="identificacaoContratoResponse1">
                      <con2:path>$identificarContratoResponse</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con1:transport-headers copy-all="false">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4153836595675112583--68137224.122a7da6bdf.-7f68</con2:id>
                <con1:header-set>outbound-request</con1:header-set>
                <con1:header name="j_identity_base" value="expression">
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($identificarContratoResponse/tran:AliasDatabase)</con2:xqueryText>
                </con1:header>
              </con1:transport-headers>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ff4</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$consultaDadoCadastralTitularRequest</con3:xqueryText>
                </con2:expr>
                <con2:message>consultaDadoCadastralTitularRequest</con2:message>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="consultaDadoCadastralTitularResponse">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ead</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localCallResponse</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-3020027521806399725-68bf3993.125d69f5772.-7ff3</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$consultaDadoCadastralTitularResponse</con3:xqueryText>
                </con2:expr>
                <con2:message>consultaDadoCadastralTitularResponse</con2:message>
              </con2:log>
            </con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
      <con:stage name="Verifica se contrato existe" errorHandler="_onErrorHandler-9688067051960780-712918d4.127bb1f33d3.-7ff8">
        <con:comment>Estágio responsável por verificar se foi encontrado 
um contrato para o identificador de contrato informado.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ClientePropesct/schemas" prefix="sch" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="ld:br/com/netservicos/atendimento/webservice/ClienteProspectJWS.ws" prefix="cli" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:variable name="$label" path="$path" asChild="false" xmlns:con1="http://www.bea.com/wli/sb/typesystem/config">
            <con1:wsdl ref="relacionar/atendimento/clienteprospect/wsdl/business/ClienteProspectDSLBSWSDLV1_0" element="cli:consultarClientePorContratoResponse" xmlns:cli="ld:br/com/netservicos/atendimento/webservice/ClienteProspectJWS.ws"/>
          </con1:variable>
        </con:context>
        <con:actions>
          <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5576933477187677003-5c98cde1.127bac785ba.-7ffd</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:not($consultaDadoCadastralTitularResponse/sch:ClientesProspect//node())</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                  <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-5576933477187677003-5c98cde1.127bac785ba.-7ffe</con3:id>
                  <con2:logLevel>debug</con2:logLevel>
                  <con2:message>Contrato nao encontrado</con2:message>
                </con2:log>
                <con1:assign varName="validationMessages">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fa5</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:assign varName="localMessageParameters">
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fff</con2:id>
                  <con1:expr>
                    <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Efetua a Consulta Dado Cadastral Titular'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
                  </con1:expr>
                </con1:assign>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5576933477187677003-5c98cde1.127bac785ba.-7fff</con2:id>
                  <con1:errCode>ESB-ATEND-0017</con1:errCode>
                  <con1:message>Contrato não encontrado</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
            <con1:default>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-5576933477187677003-5c98cde1.127bac785ba.-7ff7</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:message>Contrato encontrado</con2:message>
              </con2:log>
            </con1:default>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
      <con:stage name="Valida Igualdade dos dados de Contato com a Base" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7e9f">
        <con:comment>Estágio responsável por verificar a igualdade dos 
dados cadastrados no banco de dados com 
os dados de entrada da operação.</con:comment>
        <con:context>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:assign varName="alterarDadoContatoTitularBody" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f0b</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/AlterarDadoContatoTitularEntradaXCamposNulosXQuery"/>
                <con2:param name="dadoContatoTitular1">
                  <con2:path>$body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f2b</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$alterarDadoContatoTitularBody</con2:xqueryText>
            </con1:expr>
            <con1:message>Dados de Entrada</con1:message>
          </con1:log>
          <con1:assign varName="alterarDadoContatoTitularBase" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f08</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/AlterarDadoContatoTitularBaseXCamposNulosXQuery"/>
                <con2:param name="consultarClientePorContratoResponse1">
                  <con2:path>$consultaDadoCadastralTitularResponse</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f29</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$alterarDadoContatoTitularBase</con2:xqueryText>
            </con1:expr>
            <con1:message>Dados da base</con1:message>
          </con1:log>
          <con1:assign varName="isEqual" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4010507746681071330-72f5dbdb.126090a3d95.-7f07</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/ValidarIgualdadeAlterarDadoContatoTitularXQuery"/>
                <con2:param name="dadoContatoTitular1">
                  <con2:path>$alterarDadoContatoTitularBody</con2:path>
                </con2:param>
                <con2:param name="dadoContatoTitular2">
                  <con2:path>$alterarDadoContatoTitularBase</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:ifThenElse xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7862862821673356410--4f00a2a4.125f91a986c.-7ff1</con2:id>
            <con1:case>
              <con1:condition>
                <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">xs:boolean($isEqual)</con2:xqueryText>
              </con1:condition>
              <con1:actions>
                <con1:Error>
                  <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-129915237115333906-1542671.12603a6ba4f.-7fc4</con2:id>
                  <con1:errCode>ESB-ATEND-0013</con1:errCode>
                  <con1:message>Nenhuma alteração foi realizada.</con1:message>
                </con1:Error>
              </con1:actions>
            </con1:case>
          </con1:ifThenElse>
        </con:actions>
      </con:stage>
      <con:stage name="Chamada ao Validar Dado Contato Titular do WLI" errorHandler="_onErrorHandler-5854555711374985687--65842b72.12637166383.-7fc9">
        <con:comment>Estágio responsável por efetuar a chamada 
a operação validarDadoContatoTitular do 
business service "ContratoVendaJWSBSV1_0".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="net" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="tran" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-8000</con2:id>
            <con1:service xsi:type="ref:BusinessServiceRef" ref="relacionar/atendimento/contratovenda/businessservice/ContratoVendaJWSBSV1_0" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>validarDadoContatoTitular</con1:operation>
            <con1:request>
              <con1:body wrapped="true">$validarDadoContatoTitularRequestBody</con1:body>
              <con1:header>$validarDadoContatoTitularRequestHeader</con1:header>
            </con1:request>
            <con1:response>
              <con1:body wrapped="true">validarDadoContatoTitularResponseBody</con1:body>
              <con1:header>validarDadoContatoTitularReponseHeader</con1:header>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="validarDadoContatoRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7fff</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/AlterarDadoContatoTitularEmValidarDadoContatoTitularXQuery"/>
                    <con2:param name="dadoContatoTitular1">
                      <con2:path>$body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular</con2:path>
                    </con2:param>
                    <con2:param name="identificacaoContratoResponse1">
                      <con2:path>$identificarContratoResponse</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="validarDadoContatoTitularRequestBody">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7ffe</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Body>
{$validarDadoContatoRequest}
&lt;/soap12-env:Body></con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="validarDadoContatoTitularRequestHeader">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7ffd</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Header>
	{$header/net:NetHeader}
&lt;/soap12-env:Header></con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:transport-headers copy-all="true">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4153836595675112583--68137224.122a7da6bdf.-7f68</con2:id>
                <con1:header-set>outbound-request</con1:header-set>
                <con1:header name="j_identity_base" value="expression">
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($identificarContratoResponse/tran:AliasDatabase)</con2:xqueryText>
                </con1:header>
              </con1:transport-headers>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-129915237115333906-1542671.12603a6ba4f.-7fef</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$validarDadoContatoTitularRequestBody</con3:xqueryText>
                </con2:expr>
                <con2:message>Request body validarDadoContato</con2:message>
              </con2:log>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7ff4</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$validarDadoContatoTitularRequestHeader</con3:xqueryText>
                </con2:expr>
                <con2:message>Request Header validarDadoContatoTitular</con2:message>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="localCallResponse">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f1d</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$validarDadoContatoTitularResponseBody</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-129915237115333906-1542671.12603a6ba4f.-7fef</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$validarDadoContatoTitularResponseBody</con3:xqueryText>
                </con2:expr>
                <con2:message>Response body validarDadoContatoResponse</con2:message>
              </con2:log>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7ff3</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$validarDadoContatoTitularResponseHeader</con3:xqueryText>
                </con2:expr>
                <con2:message>Response Header validarDadoContatoTitular</con2:message>
              </con2:log>
            </con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
      <con:stage name="Chamada ao Alterar Dado Contato Titular do WLI" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7e8c">
        <con:comment>Estágio responsável por efetuar a chamada 
a operação alterarDadoContatoTitular do 
business service "ContratoVendaJWSBSV1_0".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="net" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="tran" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:varNsDecl namespace="http://www.netservicos.com.br/ContratoVendaV2/" prefix="con" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fe7</con2:id>
            <con1:service xsi:type="ref:BusinessServiceRef" ref="relacionar/atendimento/contratovenda/businessservice/ContratoVendaJWSBSV1_0" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>alterarDadoContatoTitular</con1:operation>
            <con1:request>
              <con1:body wrapped="true">$alterarDadoContatoTitularRequestBody</con1:body>
              <con1:header>$alterarDadoContatoTitularRequestHeader</con1:header>
            </con1:request>
            <con1:response>
              <con1:body wrapped="true">localCallResponse</con1:body>
              <con1:header>alterarDadoContatoTitularResponseHeader</con1:header>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="alterarDadoContatoTitularRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fe6</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/AlterarDadoContatoTitularXAlterarDadoContatoWLIXQuery"/>
                    <con2:param name="registroContato1">
                      <con2:path>$body/con:parametrosAlterarDadoContatoTitular/registroContato</con2:path>
                    </con2:param>
                    <con2:param name="dadoContatoTitular1">
                      <con2:path>$body/con:parametrosAlterarDadoContatoTitular/dadoContatoTitular</con2:path>
                    </con2:param>
                    <con2:param name="identificacaoContratoResponse1">
                      <con2:path>$identificarContratoResponse</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="alterarDadoContatoTitularRequestBody">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fe5</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Body>
{$alterarDadoContatoTitularRequest}
&lt;/soap12-env:Body></con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="alterarDadoContatoTitularRequestHeader">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fe4</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Header>
	{$header/net:NetHeader}
&lt;/soap12-env:Header></con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:transport-headers>
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8209393703415118201-2b9b361e.125fe4949aa.-7fdb</con2:id>
                <con1:header-set>outbound-request</con1:header-set>
                <con1:header name="j_identity_base" value="expression">
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">fn:data($identificarContratoResponse/tran:AliasDatabase)</con2:xqueryText>
                </con1:header>
              </con1:transport-headers>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fe1</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$alterarDadoContatoTitularRequestBody</con3:xqueryText>
                </con2:expr>
                <con2:message>Request body alterarDadoContatoTitular</con2:message>
              </con2:log>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fe0</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$alterarDadoContatoTitularRequestHeader</con3:xqueryText>
                </con2:expr>
                <con2:message>Request Header alterarDadoContatoTitular</con2:message>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="alterarDadoContatoTitularResponseBody">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e85</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localCallResponse</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fdf</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$alterarDadoContatoTitularResponseBody</con3:xqueryText>
                </con2:expr>
                <con2:message>Response Body alterarDadoContatoTitular</con2:message>
              </con2:log>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fde</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$alterarDadoContatoTitularResponseHeader</con3:xqueryText>
                </con2:expr>
                <con2:message>Response Header alterarDadoContatoTitular</con2:message>
              </con2:log>
            </con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
      <con:stage name="Insere Regsitro Auditoria" errorHandler="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7e82">
        <con:comment>Estágio responsável por inserir uma mensagem 
de alteração de dado contato titular na fila 
de auditoria.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/TransformaIdentificacaoContrato12V1" prefix="tran" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/ClientePropesct/schemas" prefix="ns1" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="net" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fdd</con2:id>
            <con1:service xsi:type="ref:BusinessServiceRef" ref="general/auditoria/businessservice/AuditoriaQueueBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:request>
              <con1:payload>$auditoriaQueueRequest</con1:payload>
            </con1:request>
            <con1:response>
              <con1:payload>auditoriaQueueResponse</con1:payload>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="auditoriaQueueRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fdc</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/AlterarDadoCadastralTitularXInsereRegistroQueueXQuery"/>
                    <con2:param name="idRegistro">
                      <con2:path>xs:string(fn:data($consultaDadoCadastralTitularResponse/ns1:ClientesProspect/ns1:clienteProspect[1]/ns1:Identificador))</con2:path>
                    </con2:param>
                    <con2:param name="nota">
                      <con2:path>fn:concat("ALTERAÇÃO DADO CONTATO: ", " ", "Identificador Assinante: ", fn:data($consultaDadoCadastralTitularResponse/ns1:ClientesProspect/ns1:clienteProspect[1]/ns1:Identificador), " ", "Número Contrato: ", fn:data($identificarContratoResponse/tran:Contrato/tran:NumeroContrato), " ", "Identificador Cidade: ", fn:data($identificarContratoResponse/tran:Contrato/tran:IdentificacaoCidade))</con2:path>
                    </con2:param>
                    <con2:param name="usuario">
                      <con2:path>fn:data($inbound/ctx:security/ctx:transportClient/ctx:username)</con2:path>
                    </con2:param>
                    <con2:param name="campo">
                      <con2:path>"SN_ASSINANTE.ID_ASSINANTE"</con2:path>
                    </con2:param>
                    <con2:param name="idAcao">
                      <con2:path>xs:integer(4001)</con2:path>
                    </con2:param>
                    <con2:param name="sistema">
                      <con2:path>fn-bea:if-then-else($header/net:NetHeader/aplicacao eq "", "NÃO INFORMADO",fn:data($header/net:NetHeader/aplicacao))</con2:path>
                    </con2:param>
                    <con2:param name="cidade">
                      <con2:path>fn:data($identificarContratoResponse/tran:Contrato/tran:IdentificacaoCidade)</con2:path>
                    </con2:param>
                    <con2:param name="criticidade">
                      <con2:path>xs:integer(1)</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fdb</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$auditoriaQueueRequest</con3:xqueryText>
                </con2:expr>
                <con2:message>Request auditoriaQueue</con2:message>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="localCallResponse">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7fba</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$auditoriaQueueResponse</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fda</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$auditoriaQueueResponse</con3:xqueryText>
                </con2:expr>
                <con2:message>Response auditoriaQueue</con2:message>
              </con2:log>
            </con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
      <con:stage name="Gerar Ocorrencia" errorHandler="_onErrorHandler-8245448508650360389-15c6f950.1568f9112db.-7ffd">
        <con:comment>Stage Responsavel pela chamada do Gerar Ocorrencia no WLI URA</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/v2/NetHeader" prefix="net" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:wsCallout xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-9058246152080925021--47cc6632.15674cddfba.-8000</con2:id>
            <con1:service xsi:type="ref:BusinessServiceRef" ref="general/ocorrencia/businessservice/GerarOcorrenciaPrazoBS" xmlns:ref="http://www.bea.com/wli/sb/reference"/>
            <con1:operation>gerarOcorrenciaPrazoRequest</con1:operation>
            <con1:request>
              <con1:body wrapped="true">$gerarOcorrenciaPrazoBodyRequest</con1:body>
              <con1:header>$gerarOcorrenciaPrazoHeaderRequest</con1:header>
            </con1:request>
            <con1:response>
              <con1:body wrapped="true">gerarOcorrenciaPrazoBodyResponse</con1:body>
              <con1:header>gerarOcorrenciaPrazoHeaderResponse</con1:header>
            </con1:response>
            <con1:requestTransform>
              <con1:assign varName="gerarOcorrenciaPrazoRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-9058246152080925021--47cc6632.15674cddfba.-7ffa</con2:id>
                <con1:expr>
                  <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                    <con2:resource ref="relacionar/atendimento/contratovenda/transformation/xquery/GerarOcorrenciaPrazoContratoVendaXQuery"/>
                    <con2:param name="identificacaoContratoResponse1">
                      <con2:path>$identificarContratoResponse</con2:path>
                    </con2:param>
                    <con2:param name="netHeader1">
                      <con2:path>$header/net:NetHeader</con2:path>
                    </con2:param>
                  </con2:xqueryTransform>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="gerarOcorrenciaPrazoBodyRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-9058246152080925021--47cc6632.15674cddfba.-7ffb</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Body>
{$gerarOcorrenciaPrazoRequest}
&lt;/soap12-env:Body></con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:assign varName="gerarOcorrenciaPrazoHeaderRequest">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-9058246152080925021--47cc6632.15674cddfba.-7fff</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Header>
{$header/net:NetHeader}
&lt;/soap12-env:Header></con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con1:transport-headers copy-all="true">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-9058246152080925021--47cc6632.15674cddfba.-7ffe</con2:id>
                <con1:header-set>outbound-request</con1:header-set>
                <con1:header name="j_identity_base" value="expression">
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$aliasDatabase</con2:xqueryText>
                </con1:header>
              </con1:transport-headers>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-9058246152080925021--47cc6632.15674cddfba.-7ffc</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$gerarOcorrenciaPrazoRequest</con3:xqueryText>
                </con2:expr>
                <con2:message>---- Request WLI URA Gerar Ocorrencia Prazo ----</con2:message>
              </con2:log>
            </con1:requestTransform>
            <con1:responseTransform>
              <con1:assign varName="gerarOcorrenciaPrazoBodyResponse">
                <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-9058246152080925021--47cc6632.15674cddfba.-7ff9</con2:id>
                <con1:expr>
                  <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$gerarOcorrenciaPrazoBodyResponse</con2:xqueryText>
                </con1:expr>
              </con1:assign>
              <con2:log xmlns:con2="http://www.bea.com/wli/sb/stages/logging/config">
                <con3:id xmlns:con3="http://www.bea.com/wli/sb/stages/config">_ActionId-9058246152080925021--47cc6632.15674cddfba.-7ff8</con3:id>
                <con2:logLevel>debug</con2:logLevel>
                <con2:expr>
                  <con3:xqueryText xmlns:con3="http://www.bea.com/wli/sb/stages/config">$gerarOcorrenciaPrazoBodyResponse</con3:xqueryText>
                </con2:expr>
                <con2:message>---- Request WLI URA Gerar Ocorrencia Prazo ----</con2:message>
              </con2:log>
            </con1:responseTransform>
          </con1:wsCallout>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="response" name="Operação Alterar Dado Contato Titular_response" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Retorno ao Cliente">
        <con:comment>Efetua o tratamento do retorno antes de ser enviado
ao cliente.</con:comment>
        <con:context/>
        <con:actions>
          <con1:replace varName="body" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8169248071451048337--67174e02.1261d2f7498.-7fc0</con2:id>
            <con1:location>
              <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText>
            </con1:location>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Body>
	&lt;con:resultadoAlterarDadoContatoTitular xmlns:con="http://www.netservicos.com.br/ContratoVendaV2/"/>
&lt;/soap12-env:Body></con2:xqueryText>
            </con1:expr>
          </con1:replace>
          <con1:replace varName="header" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3602396152036100354--4b147286.1242f8a876a.-7ff8</con2:id>
            <con1:location>
              <con2:xpathText xmlns:con2="http://www.bea.com/wli/sb/stages/config">.</con2:xpathText>
            </con1:location>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;soap12-env:Header/></con2:xqueryText>
            </con1:expr>
          </con1:replace>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-7887230296732919649-125cf5c7.1262d1d196c.-7ffb" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento de Exceção Consultar Dado Cadastral Titular">
        <con:comment>Efetua o tratamento erro lançado
no estágio "Efetua a Consulta Dado Cadastral Titular".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fb8</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao Consultar Dado Cadastral Titular</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fb1</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-7887230296732919649-125cf5c7.1262d1d196c.-7ffa</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>
     &lt;logging:value>{'Cliente Prospect (operação consulta cliente por contrato )'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fb7</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ffe</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$consultaDadoCadastralTitularRequest</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'relacionar/atendimento/clienteprospect/businessservice/ClienteProspectDSLBSV1_0.biz'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localCallResponse</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ffd</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message/>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-8000" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Identifica Contrato">
        <con:comment>Faz o tratamento de erro lançado pelo serviço 
"TransformaIdentificacaoContrato12V1".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fb8</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao Identificar Contrato</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fb1</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fff</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Transforma Identificação Contrato'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7fb7</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ffe</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$identificarContratoRequest</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'general/NETSMSDatabaseConfig/proxyservice/TransformaIdentificacaoContrato12V1.proxy'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localCallResponse</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ffd</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Transforma Identificação Contrato.</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f99" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Validações">
        <con:comment>Estágio responsável por fazer o tratamento 
de erro lançado, caso seja detectado 
o não preenchimento de um campo 
obrigatório.</con:comment>
        <con:context/>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3279836233479813435--67face5e.12a144f9607.-8000</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao validar dados de entrada.</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-301859766023057541-722f6248.12632bb33a9.-7fc2</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'ContratoVenda12V2.Estágio Validação da Entrada'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_VALIDATION'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>fn:data($fault/ctx:errorCode)</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-301859766023057541-722f6248.12632bb33a9.-7fc1</con2:id>
            <con1:errCode>ESB-ATEND-0012</con1:errCode>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f8e" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Identifica Contrato">
        <con:comment>Faz o tratamento de erro lançado pelo serviço 
"TransformaIdentificacaoContrato12V1".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f87</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao Identificar Contrato</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f86</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f85</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Transforma Identificação Contrato'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f84</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f83</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$identificarContratoRequest</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'general/NETSMSDatabaseConfig/proxyservice/TransformaIdentificacaoContrato12V1.proxy'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localCallResponse</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f82</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Transforma Identificação Contrato.</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f81" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Consultar Dado Cadastral Titular">
        <con:comment>Efetua o tratamento erro lançado
no estágio "Efetua a Consulta Dado Cadastral Titular".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f79</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao Consultar Dado Cadastral Titular</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f78</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f77</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Consultar Dado Cadastral Titular'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f76</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f75</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$consultarClientePorContratoRequest</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'relacionar/atendimento/clienteprospect/businessservice/ClienteProspectDSLBSV1_0.biz'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localCallResponse</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f74</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Consultar Dado Cadastral Titular</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f73" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Validar Igualdade da Entrada com a Base">
        <con:comment>Estágio responsável pelo tratamento de erro lançado no 
estágio "Verificação da entrada com o banco".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f6c</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao Validar Igualdade da entrada com a base</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f6b</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f6a</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Validar Igualdade de entrada do Validar Dado Cadastral com a Base'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f69</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f68</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_VALIDATION'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f67</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Validar Igualdade Dado Cadastral com a base</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f66" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Chamada ao Validar Dado Cadastral Titular do WLI">
        <con:comment>Efetua o tratamento erro lançado
no estágio "Chamada ao Validar Dado Cadastral Titular do WLI".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f5f</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao chamar WLI</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f5e</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config"><![CDATA[<excephdlr:validationMessages>
	<validationMessage xmlns:con="http://www.bea.com/wli/sb/context">
    	<code>ESB-ATEND-0015</code>
        <message>Erro na chamada ao WLI</message>
    </validationMessage>
                  
</excephdlr:validationMessages>]]></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f5d</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Chamada ao WLI'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f5c</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f5b</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'relacionar/atendimento/contratovenda/businessservice/ContratoVendaJWSBSV1_0.biz'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f5a</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Chamada ao WLI</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f4c" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Error Handler Validações">
        <con:comment>Estágio responsável por fazer o tratamento 
de erro lançado, caso seja detectado 
o não preenchimento de um campo 
obrigatório.</con:comment>
        <con:context/>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3279836233479813435--67face5e.12a144f9607.-7fff</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao validar dados de entrada.</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f49</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'ContratoVenda12V2.Estágio Validação da Entrada'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_VALIDATION'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>fn:data($fault/ctx:errorCode)</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f48</con2:id>
            <con1:errCode>ESB-ATEND-0012</con1:errCode>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f40" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Identifica Contrato">
        <con:comment>Faz o tratamento de erro lançado pelo serviço 
"TransformaIdentificacaoContrato12V1".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f3f</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao Identificar Contrato</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f3e</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f3d</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Transforma Identificação Contrato'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f3c</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f3b</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$identificarContratoRequest</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'general/NETSMSDatabaseConfig/proxyservice/TransformaIdentificacaoContrato12V1.proxy'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localCallResponse</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f3a</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Transforma Identificação Contrato.</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f38" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Consultar Dado Cadastral Titular">
        <con:comment>Efetua o tratamento erro lançado
no estágio "Efetua a Consulta Dado Cadastral Titular".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f31</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao Consultar Dado Cadastral Titular</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f30</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f2f</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Consultar Dado Cadastral Titular'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f2e</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f2d</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$consultarClientePorContratoRequest</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'relacionar/atendimento/clienteprospect/businessservice/ClienteProspectDSLBSV1_0.biz'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localCallResponse</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f2c</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Consultar Dado Cadastral Titular</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f25" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Validar Igualdade da Entrada com a Base">
        <con:comment>Estágio responsável pelo tratamento de erro lançado no 
estágio "Verificação da entrada com o banco".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f24</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao Validar Igualdade da entrada com a base</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f23</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f22</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Validar Igualdade de entrada do Alterar Dado Cadastral com a Base'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f21</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f20</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_VALIDATION'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f1f</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Validar Igualdade Dado Cadastral com a base</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f1e" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Chamada ao Alterar Dado Cadastral Titular do WLI">
        <con:comment>Efetua o tratamento erro lançado
no estágio "Chamada ao Alterar Dado Cadastral Titular do WLI".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f16</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao chamar WLI</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f15</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f14</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Chamada ao WLI'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f13</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f12</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'relacionar/atendimento/contratovenda/businessservice/ContratoVendaJWSBSV1_0.biz'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f11</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Chamada ao WLI</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7f06" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Error Handler Validações">
        <con:comment>Estágio responsável por fazer o tratamento 
de erro lançado, caso seja detectado 
o não preenchimento de um campo 
obrigatório.</con:comment>
        <con:context/>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3279836233479813435--67face5e.12a144f9607.-7ffe</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao validar dados de entrada.</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f03</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'ContratoVenda12V2.Estágio Validação da Entrada'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_VALIDATION'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>fn:data($fault/ctx:errorCode)</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7f02</con2:id>
            <con1:errCode>ESB-ATEND-0012</con1:errCode>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7efa" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Identifica Contrato">
        <con:comment>Faz o tratamento de erro lançado pelo serviço 
"TransformaIdentificacaoContrato12V1".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ef9</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao Identificar Contrato</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ef8</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ef7</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Transforma Identificação Contrato'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ef6</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ef5</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$identificarContratoRequest</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'general/NETSMSDatabaseConfig/proxyservice/TransformaIdentificacaoContrato12V1.proxy'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localCallResponse</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ef4</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Transforma Identificação Contrato.</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7eec" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Consultar Dado Cadastral Titular">
        <con:comment>Efetua o tratamento erro lançado
no estágio "Efetua a Consulta Dado Cadastral Titular".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7eeb</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao Consultar Dado Cadastral Titular</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7eea</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ee9</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Consultar Dado Cadastral Titular'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ee8</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ee7</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$consultarClientePorContratoRequest</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'relacionar/atendimento/clienteprospect/businessservice/ClienteProspectDSLBSV1_0.biz'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localCallResponse</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ee6</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Consultar Dado Cadastral Titular</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7edf" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Validar Igualdade da Entrada com a Base">
        <con:comment>Estágio responsável pelo tratamento de erro lançado no 
estágio "Verificação da entrada com o banco".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ede</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao Validar Igualdade da entrada com a base</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7edd</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7edc</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Validar Igualdade de entrada do Validar Dado Contato com a Base'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7edb</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7eda</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_VALIDATION'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ed9</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Validar Igualdade Dado Contato com a base</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7ed2" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Chamada ao Validar Dado Contato Titular do WLI">
        <con:comment>Efetua o tratamento erro lançado
no estágio "Chamada ao Validar Dado Contato Titular do WLI".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ed1</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao chamar WLI</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ed0</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ecf</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Chamada ao WLI'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ece</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ecd</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'relacionar/atendimento/contratovenda/businessservice/ContratoVendaJWSBSV1_0.biz'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ecc</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Chamada ao WLI</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7ec0" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Error Handler Validações">
        <con:comment>Estágio responsável por fazer o tratamento 
de erro lançado, caso seja detectado 
o não preenchimento de um campo 
obrigatório.</con:comment>
        <con:context/>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3279836233479813435--67face5e.12a144f9607.-7ffd</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao validar dados de entrada.</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ebd</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'ContratoVenda12V2.Estágio Validação da Entrada'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_VALIDATION'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>fn:data($fault/ctx:errorCode)</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ebc</con2:id>
            <con1:errCode>ESB-ATEND-0012</con1:errCode>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7eb5" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Identifica Contrato">
        <con:comment>Faz o tratamento de erro lançado pelo serviço 
"TransformaIdentificacaoContrato12V1".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7eb4</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao Identificar Contrato</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7eb3</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7eb2</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Transforma Identificação Contrato'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7eb1</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7eb0</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$identificarContratoRequest</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'general/NETSMSDatabaseConfig/proxyservice/TransformaIdentificacaoContrato12V1.proxy'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localCallResponse</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7eaf</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Transforma Identificação Contrato.</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7ea6" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Consultar Dado Cadastral Titular">
        <con:comment>Efetua o tratamento erro lançado
no estágio "Efetua a Consulta Dado Cadastral Titular".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7eeb</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao Consultar Dado Cadastral Titular</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ea4</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ea3</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Consultar Dado Contato Titular'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ea2</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ea1</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$consultarClientePorContratoRequest</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'relacionar/atendimento/clienteprospect/businessservice/ClienteProspectDSLBSV1_0.biz'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localCallResponse</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ea0</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Consultar Dado Cadastral Titular</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7e9f" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Validar Igualdade da Entrada com a Base">
        <con:comment>Estágio responsável pelo tratamento de erro lançado no 
estágio "Verificação da entrada com o banco".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e98</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao Validar Igualdade da entrada com a base</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e97</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e96</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Validar Igualdade de entrada do Alterar Dado Contato com a Base'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e95</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e94</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_VALIDATION'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e93</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Validar Igualdade Dado Contato com a base</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7e8c" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Chamada ao Alterar Dado Contato Titular do WLI">
        <con:comment>Efetua o tratamento erro lançado
no estágio "Chamada ao Alterar Dado Contato Titular do WLI".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e8b</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao chamar WLI</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e8a</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e89</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Chamada ao WLI'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e88</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e87</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'relacionar/atendimento/contratovenda/businessservice/ContratoVendaJWSBSV1_0.biz'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e86</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Chamada ao WLI</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7e82" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Insere Registro Auditoria">
        <con:comment>Estágio responsável pelo tratamento de erro 
lançado no estágio "Insere Registro Auditoria".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e7b</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao Inserir Registro Auditoria</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e7a</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e79</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Insere Registro Auditoria'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e78</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e77</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'general/auditoria/businessservice/AuditoriaQueueBS.biz'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e76</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Insere Registro Auditoria</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-480872595598645744--39a14e1e.1262e153914.-7e6f" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Insere Registro Auditoria">
        <con:comment>Estágio responsável pelo tratamento de erro 
lançado no estágio "Insere Registro Auditoria".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e6e</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao Inserir Registro Auditoria</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e6d</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e6c</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Insere Registro Auditoria'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e6b</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e6a</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'general/auditoria/businessservice/AuditoriaQueueBS.biz'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e69</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Insere Registro Auditoria</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-5854555711374985687--65842b72.12637166383.-7ff0" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Chamada ao Validar Dado Cadastral do WLI">
        <con:comment>Efetua o tratamento erro lançado
no estágio "Chamada ao Validar Dado Cadastral Titular do WLI".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7fe9</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao Validar Dado Cadastral WLI</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7fe8</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7fe7</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Validar Dado Cadastral Titular WLI'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7fe6</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7fe5</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'relacionar/atendimento/contratovenda/businessservice/ContratoVendaJWSBSV1_0.biz'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7fe4</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Validar Dado Cadastral Titular WLI</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-5854555711374985687--65842b72.12637166383.-7fc9" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Chamada ao Validar Dado Contato Titular do WLI">
        <con:comment>Efetua o tratamento erro lançado
no estágio "Chamada ao Validar Dado Contato Titular do WLI".</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7fc8</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao Validar Dado Contato WLI</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7fc7</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7fc6</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Validar Dado Contato Titular WLI'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7fc5</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7fc4</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'relacionar/atendimento/contratovenda/businessservice/ContratoVendaJWSBSV1_0.biz'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-5854555711374985687--65842b72.12637166383.-7fc3</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Validar Dado ContatoTitular WLI</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-4191636047790565318--425b84ee.1263e06c433.-7ffa" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Tratamento Exceção Operação Default">
        <con:comment>Estágio responsável por fazer o tratamento 
de erro lançado, caso seja solicitada uma 
operação inválida.</con:comment>
        <con:context/>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3279836233479813435--67face5e.12a144f9607.-7ffc</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro ao solicitar operação inválida.</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ebd</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'ContratoVenda12V2.Estágio Operação Default'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>fn:data($fault/ctx:errorCode)</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-4191636047790565318--425b84ee.1263e06c433.-7ff5</con2:id>
            <con1:errCode>ESB-ATEND-0002</con1:errCode>
            <con1:message>A operação solicitada para o serviço não é válida.</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-9688067051960780-712918d4.127bb1f33d3.-7ff8" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio trata exceção contrato não encontrado">
        <con:comment>Estágio responsável por fazer o tratamento de 
erro no caso do contrato não ser encontrado.</con:comment>
        <con:context/>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3279836233479813435--67face5e.12a144f9607.-7ff8</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro contrato não encontrado.</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7ebd</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'ContratoVenda12V2.Estágio Validação da Entrada'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_VALIDATION'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>fn:data($fault/ctx:errorCode)</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-9688067051960780-712918d4.127bb1f33d3.-7ff2</con2:id>
            <con1:errCode>ESB-ATEND-0017</con1:errCode>
            <con1:message>Contrato não encontrado</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-6095354263032001506-51fecf5.127d967ba12.-7ffe" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio trata exceção contrato não encontrado">
        <con:comment>Estágio responsável por fazer o tratamento de 
erro no caso do contrato não ser encontrado.</con:comment>
        <con:context/>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3279836233479813435--67face5e.12a144f9607.-7ff9</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro contrato não encontrado.</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7ff9</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'ContratoVenda12V2.Estágio Validação da Entrada'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_VALIDATION'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>fn:data($fault/ctx:errorCode)</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7ff8</con2:id>
            <con1:errCode>ESB-ATEND-0017</con1:errCode>
            <con1:message>Contrato não encontrado</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-6095354263032001506-51fecf5.127d967ba12.-7fef" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio trata exceção contrato não encontrado">
        <con:comment>Estágio responsável por fazer o tratamento de 
erro no caso do contrato não ser encontrado.</con:comment>
        <con:context/>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3279836233479813435--67face5e.12a144f9607.-7ffa</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro contrato não encontrado.</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7ff9</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'ContratoVenda12V2.Estágio Validação da Entrada'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_VALIDATION'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>fn:data($fault/ctx:errorCode)</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7fed</con2:id>
            <con1:errCode>ESB-ATEND-0017</con1:errCode>
            <con1:message>Contrato não encontrado</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-6095354263032001506-51fecf5.127d967ba12.-7fe8" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio trata exceção contrato não encontrado">
        <con:comment>Estágio responsável por fazer o tratamento de 
erro no caso do contrato não ser encontrado.</con:comment>
        <con:context/>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-3279836233479813435--67face5e.12a144f9607.-7ffb</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>Erro contrato não encontrado.</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7ff9</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'ContratoVenda12V2.Estágio Validação da Entrada'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_VALIDATION'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>fn:data($fault/ctx:errorCode)</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-6095354263032001506-51fecf5.127d967ba12.-7fe7</con2:id>
            <con1:errCode>ESB-ATEND-0017</con1:errCode>
            <con1:message>Contrato não encontrado</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-1365298233829760588--1355c916.134a3ebc4f7.-7ff9" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Integração Parceiro">
        <con:comment>Tratamento de Exceção ocorrido ao realizar Integração com o Parceiro</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1365298233829760588--1355c916.134a3ebc4f7.-7ff8</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$fault</con2:xqueryText>
            </con1:expr>
            <con1:message>ERRO no Estágio Integração Parceiro Negócio.</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:comment xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/>z</con2:comment>
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1963799479765404985--13b8d675.1283bafb5c8.-7ef8</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1365298233829760588--1355c916.134a3ebc4f7.-7ff5</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>
     &lt;logging:value>{'Contrato Venda Serviço Integração Dados Cadastrais'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1365298233829760588--1355c916.134a3ebc4f7.-7ff4</con2:id>
            <con1:logLevel>debug</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$localMessageParameters</con2:xqueryText>
            </con1:expr>
            <con1:message>localMessageParameters</con1:message>
          </con1:log>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1365298233829760588--1355c916.134a3ebc4f7.-7ff0</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'relacionar/atendimento/contratovenda/businessservice/ContratoVendaJWSBSV1_0.biz'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'ESB-ATEND-0015'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-1365298233829760588--1355c916.134a3ebc4f7.-7fef</con2:id>
            <con1:errCode>ESB-ATEND-0015</con1:errCode>
            <con1:message>Erro durante a execução do recurso: Integração Parceiro Negócio</con1:message>
          </con1:Error>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:pipeline type="error" name="_onErrorHandler-8245448508650360389-15c6f950.1568f9112db.-7ffd" xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:stage name="Estágio Tratamento Exceção Gerar Ocorrencia.">
        <con:comment>Não será lançada a Exceção, pois a não geração da ocorrencia não pode onerar o serviço principal. Será apenas logado o erro com severidade de warning.</con:comment>
        <con:context>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/NETESBExceptionHandler12V1" prefix="excephdlr" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
          <con1:userNsDecl namespace="http://www.netservicos.com.br/modelocanonico/v2/logging" prefix="logging" xmlns:con1="http://www.bea.com/wli/sb/stages/config"/>
        </con:context>
        <con:actions>
          <con1:assign varName="gerarOcorrenciaPrazoBodyResponse" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8245448508650360389-15c6f950.1568f9112db.-7ffc</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$gerarOcorrenciaPrazoResponse</con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8245448508650360389-15c6f950.1568f9112db.-7ffb</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$gerarOcorrenciaPrazoBodyResponse</con2:xqueryText>
            </con1:expr>
            <con1:message>----- Erro ao Gerar Ocorrencia para o Serviço Contrato Venda na operação Alterar Dado Contato Titular ---</con1:message>
          </con1:log>
          <con1:assign varName="validationMessages" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e7a</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:validationMessages/></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="localMessageParameters" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e79</con2:id>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">&lt;excephdlr:messageParameters>     
      &lt;logging:value>{'Gerar Ocorrencia Prazo'}&lt;/logging:value>
&lt;/excephdlr:messageParameters></con2:xqueryText>
            </con1:expr>
          </con1:assign>
          <con1:assign varName="errorHandlerRequest" xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e77</con2:id>
            <con1:expr>
              <con2:xqueryTransform xmlns:con2="http://www.bea.com/wli/sb/stages/config">
                <con2:resource ref="general/NETESBExceptionHandler/transformation/TransformarEntradaExceptionHandlerXQuery"/>
                <con2:param name="additionalInformation">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="currentFault">
                  <con2:path>$fault</con2:path>
                </con2:param>
                <con2:param name="exceptionStackTrace">
                  <con2:path>''</con2:path>
                </con2:param>
                <con2:param name="accessResourceName">
                  <con2:path>'general/ocorrencia/businessservice/GerarOcorrenciaPrazo.biz'</con2:path>
                </con2:param>
                <con2:param name="responseSOAPVersion">
                  <con2:path>'1.2'</con2:path>
                </con2:param>
                <con2:param name="currentBody">
                  <con2:path>$body</con2:path>
                </con2:param>
                <con2:param name="exceptionClassification">
                  <con2:path>'CLASSIFICATION_RESOURCE'</con2:path>
                </con2:param>
                <con2:param name="processo">
                  <con2:path>'atendimento'</con2:path>
                </con2:param>
                <con2:param name="messageParameters">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="macroProcesso">
                  <con2:path>'RELACIONAR'</con2:path>
                </con2:param>
                <con2:param name="callResponse">
                  <con2:path>$localMessageParameters</con2:path>
                </con2:param>
                <con2:param name="validationMessages">
                  <con2:path>$validationMessages</con2:path>
                </con2:param>
                <con2:param name="messageCode">
                  <con2:path>'WLI_URA_EXCEPTION'</con2:path>
                </con2:param>
                <con2:param name="currentInbound">
                  <con2:path>$inbound</con2:path>
                </con2:param>
              </con2:xqueryTransform>
            </con1:expr>
          </con1:assign>
          <con1:Error xmlns:con1="http://www.bea.com/wli/sb/stages/transform/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-480872595598645744--39a14e1e.1262e153914.-7e76</con2:id>
            <con1:errCode>WLI_URA_EXCEPTION</con1:errCode>
            <con1:message>---- Erro durante a Consulta GerarOcorrenciaPrazo no WLI URA -----</con1:message>
          </con1:Error>
          <con1:log xmlns:con1="http://www.bea.com/wli/sb/stages/logging/config">
            <con2:id xmlns:con2="http://www.bea.com/wli/sb/stages/config">_ActionId-8245448508650360389-15c6f950.1568f9112db.-7ffe</con2:id>
            <con1:logLevel>error</con1:logLevel>
            <con1:expr>
              <con2:xqueryText xmlns:con2="http://www.bea.com/wli/sb/stages/config">$gerarOcorrenciaPrazoBodyResponse</con2:xqueryText>
            </con1:expr>
            <con1:message>----- Erro ao Gerar Ocorrencia para o Serviço GerarSolicIPV4 -----</con1:message>
          </con1:log>
        </con:actions>
      </con:stage>
    </con:pipeline>
    <con:flow xmlns:con="http://www.bea.com/wli/sb/pipeline/config">
      <con:branch-node type="operation" name="Serviço Contrato Venda">
        <con:comment>Proxy de entrada para o serviço Contrato Venda, versão 2.0.
Versão SOAP: 1.2.
O Proxy contém as operações validarDadoCadastralTitular, alterarDadoCadastralTitular, 
validarDadoContatoTitular e alterarDadoContatoTitular, que fazem 
chamadas às respectivas operações no WLI. A operação consultarDadoCadastralTitular faz chamada ao 
ALDSP do ClienteProspect. A operação default retorna uma mensagem de erro informando que a 
operação solicitada é inválida.</con:comment>
        <con:context/>
        <con:branch-table>
          <con:branch name="consultarDadoCadastralTitular">
            <con:operator>equals</con:operator>
            <con:value/>
            <con:flow>
              <con:pipeline-node name="Operação Consultar Dado Cadastral Titular">
                <con:comment>Pipeline Pair responsável por implementar o fluxo 
da operação Consultar Dado Cadastral Titular do proxy 12.</con:comment>
                <con:request>Operação Consultar Dado Cadastral Titular_request</con:request>
                <con:response>Operação Consultar Dado Cadastral Titular_response</con:response>
              </con:pipeline-node>
            </con:flow>
          </con:branch>
          <con:branch name="validarDadoCadastralTitular">
            <con:operator>equals</con:operator>
            <con:value/>
            <con:flow>
              <con:pipeline-node name="Operação Validar Dado Cadastral Titular">
                <con:comment>Pipeline Pair responsável por implementar o fluxo 
da operação Validar Dado Cadastral Titular do proxy 12.</con:comment>
                <con:request>Operação Validar Dado Cadastral Titular_request</con:request>
                <con:response>Operação Validar Dado Cadastral Titular_response</con:response>
              </con:pipeline-node>
            </con:flow>
          </con:branch>
          <con:branch name="alterarDadoCadastralTitular">
            <con:operator>equals</con:operator>
            <con:value/>
            <con:flow>
              <con:pipeline-node name="Operação Alterar Dado Cadastral Titular">
                <con:comment>Pipeline Pair responsável por implementar o fluxo 
da operação Alterar Dado Cadastral Titular do proxy 12.</con:comment>
                <con:request>Operação Alterar Dado Cadastral Titular_request</con:request>
                <con:response>Operação Alterar Dado Cadastral Titular_response</con:response>
              </con:pipeline-node>
            </con:flow>
          </con:branch>
          <con:branch name="validarDadoContatoTitular">
            <con:operator>equals</con:operator>
            <con:value/>
            <con:flow>
              <con:pipeline-node name="Operação Validar Dado Contato Titular">
                <con:comment>Pipeline Pair responsável por implementar o fluxo 
da operação Validar Dado Contato Titular do proxy 12.</con:comment>
                <con:request>Operação Validar Dado Contato Titular_request</con:request>
                <con:response>Operação Validar Dado Contato Titular_response</con:response>
              </con:pipeline-node>
            </con:flow>
          </con:branch>
          <con:branch name="alterarDadoContatoTitular">
            <con:operator>equals</con:operator>
            <con:value/>
            <con:flow>
              <con:pipeline-node name="Operação Alterar Dado Contato Titular">
                <con:comment>Pipeline Pair responsável por implementar o fluxo 
da operação Alterar Dado Contato Titular do proxy 12.</con:comment>
                <con:request>Operação Alterar Dado Contato Titular_request</con:request>
                <con:response>Operação Alterar Dado Contato Titular_response</con:response>
              </con:pipeline-node>
            </con:flow>
          </con:branch>
          <con:default-branch>
            <con:flow>
              <con:pipeline-node name="Operação Default">
                <con:comment>Pipeline Pair responsável por implementar o fluxo 
da operação Default do proxy 12.</con:comment>
                <con:request>Operação Default_request</con:request>
                <con:response>Operação Default_response</con:response>
              </con:pipeline-node>
            </con:flow>
          </con:default-branch>
        </con:branch-table>
      </con:branch-node>
    </con:flow>
  </ser:router>
  <ser:alertRules xmlns:aler="http://www.bea.com/wli/monitoring/alert" xmlns:ser="http://www.bea.com/wli/sb/services" xmlns:tran="http://www.bea.com/wli/sb/transports"/>
</xml-fragment>